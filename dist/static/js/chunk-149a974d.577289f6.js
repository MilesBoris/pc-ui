(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-149a974d"],{"1a2d":function(t,i,s){},"2f21":function(t,i,s){"use strict";var e=s("79e5");t.exports=function(t,i){return!!t&&e(function(){i?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,i,s){"use strict";var e=s("5ca1"),a=s("d8e8"),n=s("4bf8"),r=s("79e5"),o=[].sort,c=[1,2,3];e(e.P+e.F*(r(function(){c.sort(void 0)})||!r(function(){c.sort(null)})||!s("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(n(this)):o.call(n(this),a(t))}})},5795:function(t,i,s){"use strict";var e=s("1a2d"),a=s.n(e);a.a},"72a9":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticStyle:{"margin-top":"60px"}},[s("div",{staticClass:"banner"},[s("div",{staticClass:"banner-box"},[t._l(t.roulette,function(i,e){return s("div",{key:e,staticClass:"banner-text"},[s("p",[t._v("活动开始时间:"+t._s(i.activityStrartTimeStr))]),s("p",[t._v("活动结束时间:"+t._s(i.activityEndTimeStr))])])}),s("div",{staticClass:"zp"},[s("div",{staticClass:"wheel-pointer-box"},[s("div",{staticClass:"wheel-pointer",style:{transform:t.rotate_angle_pointer,transition:t.rotate_transition_pointer},on:{click:function(i){t.zhuan()}}})]),s("div",{staticClass:"wheel-bg",style:{transform:t.rotate_angle,transition:t.rotate_transition}},[s("div",{staticClass:"prize-list"},t._l(t.prize_list,function(i,e){return s("div",{key:e,staticClass:"prize-item"},[s("div",{staticClass:"prize-pic"},[s("img",{attrs:{src:i.prizePictureAddress}})]),s("div",{staticClass:"prize-type"},[t._v("\n                                "+t._s(i.prizeName)+"\n                            ")])])}))])])],2)]),s("div",{staticClass:"hot",staticStyle:{width:"auto"}},[s("div",{staticClass:"hot-box"},[s("ul",{staticClass:"list"},[s("li",{directives:[{name:"show",rawName:"v-show",value:"true"==t.switch1,expression:"switch1=='true'"}]},[t._v("剩余抽奖次数："+t._s(t.drawTimes))]),s("li",{directives:[{name:"show",rawName:"v-show",value:"true"==t.switch2,expression:"switch2=='true'"}]},[t._v("当前积分: "+t._s(t.integral)),s("span",{attrs:{id:"number"}})]),s("li",[s("a",{staticClass:"winner-record",on:{click:function(i){t.mOpen(t.cLoginUser.id)}}},[t._v("中奖纪录")]),t._v("   ")])]),s("div",{staticClass:"gdbf"},[s("p",[t._v("最新消息")]),s("div",{staticClass:"txtMarquee-left"},[t._m(0),s("div",{staticClass:"bd"},[s("ul",{staticClass:"infoList"},t._l(t.roulette,function(i,e){return s("li",{key:e},[s("marquee",{attrs:{width:"880px",direction:"left",behavior:"scroll",scrollamount:"8",loop:"1",hspace:"90",vspace:"50"}},[t._v("\n                                 "+t._s(i.advert)+"\n                            ")])],1)}))])])])])]),s("div",{staticClass:"cont"},[s("div",{staticClass:"cont-box"},[s("div",{staticClass:"cont-title"},[t._v("\n                获奖名单\n            ")]),s("div",{staticClass:"name-list"},[s("div",{staticClass:"txtMarquee-top fl"},[s("div",{staticClass:"bd"},[s("div",{staticClass:"tempWrap",staticStyle:{overflow:"hidden",position:"relative",height:"172px"}},[s("ul",{staticClass:"infoList",staticStyle:{height:"300px",position:"relative",padding:"0px",margin:"0px"}},[s("marquee",{attrs:{behavior:"scroll",direction:"up",height:"160"}},t._l(t.luckDraw,function(i,e){return e<20?s("li",{key:e,staticClass:"clone",staticStyle:{height:"24px"}},[s("span",{staticClass:"span4"},[t._v("恭喜  "+t._s(i.winningUser))]),t._v("    中奖\n                                            "),s("span",{staticClass:"span5"},[t._v(t._s(i.prizeName))]),t._v("  \n                                            "),s("span",{staticClass:"span6"},[t._v(t._s(i.luckyDrawTimeStr))])]):t._e()}))],1)])])]),s("div",{staticClass:"txtMarquee-top fr"},[s("div",{staticClass:"bd"},[s("div",{staticClass:"tempWrap",staticStyle:{overflow:"hidden",position:"relative",height:"172px"}},[s("ul",{staticClass:"infoList",staticStyle:{height:"300px",position:"relative",padding:"0px",margin:"0px"}},[s("marquee",{attrs:{behavior:"scroll",direction:"up",height:"160"}},t._l(t.luckDraw,function(i,e){return e>20?s("li",{key:e,staticClass:"clone",staticStyle:{height:"24px"}},[s("span",{staticClass:"span4"},[t._v("恭喜  "+t._s(i.winningUser))]),t._v("    中奖\n                                            "),s("span",{staticClass:"span5"},[t._v(t._s(i.prizeName))]),t._v("  \n                                            "),s("span",{staticClass:"span6"},[t._v(t._s(i.luckyDrawTimeStr))])]):t._e()}))],1)])])])]),s("div",{staticClass:"cont-title"},[t._v("\n                活动条件\n            ")]),t._l(t.roulette,function(i,e){return s("div",{key:"ac"+e,staticClass:"introduce"},[s("p",{domProps:{innerHTML:t._s(i.activityConditions)}})])}),s("div",{staticClass:"cation"}),s("div",{staticClass:"cont-title"},[t._v("\n                奖品说明\n            ")]),t._l(t.roulette,function(i,e){return s("div",{key:"pd"+e,staticClass:"introduce"},[s("p",{domProps:{innerHTML:t._s(i.prizeDescription)}})])}),s("div",{staticClass:"cont-title"},[t._v("\n                活动说明\n            ")]),t._l(t.roulette,function(i,e){return s("div",{key:"ad"+e,staticClass:"introduce"},[s("p",{domProps:{innerHTML:t._s(i.activityDescription)}})])})],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:"true"==t.toast_control,expression:"toast_control=='true'"}],staticClass:"toast"},[s("div",{staticClass:"toast-container"},[s("img",{staticClass:"toast-picture",attrs:{src:t.toast_pictrue}}),s("div",{staticClass:"close",on:{click:function(i){t.close_toast()}}}),s("div",{staticClass:"toast-title"},[t._v("\n                "+t._s(t.toast_title)+"\n            ")]),s("div",{staticClass:"toast-btn"},[s("div",{staticClass:"toast-cancel",on:{click:t.close_toast}},[t._v("关闭")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"true"==t.toast_control,expression:"toast_control=='true'"}],staticClass:"toast-mask"})])},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"hd"},[s("a",{staticClass:"next"}),s("a",{staticClass:"prev"})])}],n=(s("55dd"),s("faab")),r={name:"IntegralDraw",mixins:[n["a"]],data:function(){return{easejoy_bean:0,integral:0,drawTimes:0,luckDraw:[],roulette:[],switch1:"false",switch2:"false",prize_list:[{icon:"",count:"",name:"",isPrize:""}],toast_control:"false",hasPrize:"false",start_rotating_degree:0,rotate_angle:0,start_rotating_degree_pointer:0,rotate_angle_pointer:0,rotate_transition:"transform 6s ease-in-out",rotate_transition_pointer:"transform 12s ease-in-out",click_flag:!0,index:0}},computed:{toast_title:function(){return this.hasPrize?"恭喜您，获得"+this.prize_list[this.index].prizeName:this.prize_list[this.index].prizeName},toast_pictrue:function(){return this.hasPrize?"/static/images/activity/congratulation.png":"/static/images/activity/sorry.png"}},mounted:function(){var t=this;this.mLoading(!0),this.$http.get("/integralDrawC/roulettePrize.json").then(function(i){0==i.code?t.prize_list=i.data?i.data:[]:t.mAlert("轮盘活动界面初始化失败，请刷新界面")}),this.$http.get("/integralDrawC/getWinningList.json").then(function(i){0==i.code?(t.luckDraw=i.data?i.data:[],i.message<0?t.drawTimes=0:t.drawTimes=i.message):t.mAlert("获取中奖名单失败，请刷新界面")}),this.$http.get("/integralDrawC/queryRouletteSettingList.json").then(function(i){0==i.code?(t.roulette=i.data?i.data:[],t.roulette[0].isDrawTimes&&(t.switch1="true"),t.roulette[0].isIntegral&&(t.switch2="true")):t.mAlert("获取轮盘设置失败，请刷新界面")}),this.$http.post("/memberUser/memberinfo.json").then(function(i){0==i.code&&(t.integral=i.data.integral/100,t.integral<0&&(t.integral=0))})},methods:{zhuan:function(){var t=this;this.click_flag&&(this.mLoading(!0),this.$http.post("/integralDrawC/lotteryDraw.json",{username:this.cLoginUser.username}).then(function(i){if(0==i.code){t.index=i.message;var s=0,e=5,a=(Math.floor(7*Math.random()),t.index),n=[337.5,292.5,247.5,202.5,157.5,112.5,67.5,22.5],r=6;if(t.click_flag=!1,0==s){var o=t.start_rotating_degree+360*r+n[a]-t.start_rotating_degree%360;t.start_rotating_degree=o,t.rotate_angle="rotate("+o+"deg)";var c=t;setTimeout(function(){c.click_flag=!0,c.game_over()},1e3*e+1500)}}else t.mAlert(i.message,function(){},"error")}).catch(function(i){t.mAlert("请稍后再试...")}))},sortKey:function(t,i){return t.sort(function(t,s){var e=t[i],a=s[i];return e<a?-1:e>a?1:0})},game_over:function(){this.getIntegral(),this.getDrawTimes(),this.toast_control="true",this.hasPrize=this.prize_list[this.index].isPrize},close_toast:function(){this.toast_control="false"},getIntegral:function(){var t=this;this.$http.post("/memberUser/memberinfo.json").then(function(i){0==i.code&&(t.integral=i.data.integral/100,t.integral<0&&(t.integral=0))})},getDrawTimes:function(){var t=this;this.$http.get("/integralDrawC/getWinningList.json").then(function(i){0==i.code?(t.luckDraw=i.data?i.data:[],i.message<0?t.drawTimes=0:t.drawTimes=i.message):t.mAlert("获取中奖名单失败，请刷新界面")})},mOpen:function(){this.mWinOpen("中奖纪录页面",function(){return s.e("chunk-cb6878f0").then(s.bind(null,"b4b3"))},{},700)}},created:function(){}},o=r,c=(s("5795"),s("2877")),l=Object(c["a"])(o,e,a,!1,null,"16f29d92",null);l.options.__file="IntegralDraw.vue";i["default"]=l.exports}}]);
//# sourceMappingURL=chunk-149a974d.577289f6.js.map