{"remainingRequest":"/Users/hw/work/memberVueD/node_modules/thread-loader/dist/cjs.js!/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js!/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hw/work/memberVueD/src/views/Member/FinanceCenter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hw/work/memberVueD/src/views/Member/FinanceCenter.vue","mtime":1553591578937},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _parseInt from \"/Users/hw/work/memberVueD/node_modules/@babel/runtime-corejs2/core-js/parse-int\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _parseFloat from \"/Users/hw/work/memberVueD/node_modules/@babel/runtime-corejs2/core-js/parse-float\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport win from \"@/mixins/window\";\nexport default {\n  name: \"FinanceCenter\",\n  mixins: [win],\n  data: function data() {\n    return {\n      agnetLevel: \"\",\n      amount: \"\",\n      quickmoneybtns: [],\n      rechargeTypes: [],\n      rechargeOther: [],\n      sltApiid: \"\",\n      sltApiTimer: undefined,\n      checkedApiType: {},\n      selectedBank: {},\n      selectedBankPayOnlinePath: \"\",\n      //选择的网银支付渠道对应的VUE组件路径\n      bankPayOnlineParam: {} //网银支付渠道 动态组件 要传到子组件的参数\n\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.mLoading(true);\n    this.$http.get(\"/memberUser/memberinfo.json\").then(function (result) {\n      if (result.code == 0) {\n        _this.agnetLevel = result.data.agnetLevel;\n      }\n    });\n  },\n  computed: {\n    //获取选中的网银支付的VUE组件地址\n    selectbankPayOnlines: function selectbankPayOnlines() {\n      if (!!this.bankPayOnlineParam) {\n        var url = this.bankPayOnlineParam.doPage;\n\n        if (!!url) {\n          var index = url.indexOf(\"recharge/\") + 9;\n\n          if (index < url.length) {\n            url = url.substring(index, url.length);\n            var name = url.substring(0, url.indexOf(\"/\"));\n            return function () {\n              return import(\"../pay/bank/\" + name + \"/index\");\n            };\n          }\n        }\n\n        return null;\n      } else {\n        return null;\n      }\n    },\n    cSelectRechargeType: function cSelectRechargeType() {\n      var a = this.rechargeTypes.find(function (item) {\n        return item.selected === true;\n      });\n      return a == undefined ? {} : a;\n    }\n  },\n  methods: {\n    mInit: function mInit() {\n      var _this2 = this;\n\n      //线上支付方式\n      this.$http.post(\"/recharge/rechargeType.json?showType=1\").then(function (result) {\n        if (result.code == 0) {\n          result.data.apis.forEach(function (ele, i) {\n            ele.selected = i === 0;\n            ele.list.forEach(function (item) {\n              return item.checked = false;\n            });\n\n            if (ele.list.length > 0 && ele.list[0].typeid == 7) {\n              _this2.bankPayOnlines = ele.list;\n\n              _this2.mChangeBankPayOnline(_this2.bankPayOnlines[0]);\n\n              return;\n            }\n          });\n          _this2.rechargeTypes = result.data.apis;\n          _this2.rechargeOther = result.data.others;\n\n          _this2.mSelectRechargeType(_this2.cSelectRechargeType.id);\n        } else {\n          _this2.mAlert(result.message);\n        }\n      }).catch(function (error) {\n        console.log(error);\n\n        _this2.mAlert(\"请求出错...\");\n      });\n    },\n    // 存款方式 选择\n    mSelectRechargeType: function mSelectRechargeType(id) {\n      var _this3 = this;\n\n      this.rechargeTypes.forEach(function (item) {\n        item.selected = item.id === id;\n\n        if (item.selected) {\n          _this3.mApiOnChange(item.list[0]);\n        }\n      });\n    },\n    chaconeybtn: function chaconeybtn(amount) {\n      this.amount = amount;\n    },\n    //支付宝、微信支付渠道切换\n    mApiOnChange: function mApiOnChange(api) {\n      var _this4 = this;\n\n      if (this.sltApiTimer) {\n        clearTimeout(this.sltApiTimer);\n      } // this.mLoading(true);\n\n\n      this.sltApiTimer = setTimeout(function () {\n        _this4.checkedApiType = api;\n        _this4.amount = \"\";\n\n        var sltType = _this4.rechargeTypes.find(function (item) {\n          return item.selected === true;\n        });\n\n        if (sltType.list) {\n          if (api.verificationMoney.indexOf(',') > 0) {\n            var moneystr_arr = api.verificationMoney.split(\",\");\n            _this4.quickmoneybtns = moneystr_arr;\n          } else {\n            _this4.quickmoneybtns = [];\n          }\n\n          sltType.list.forEach(function (item) {\n            item.checked = api.id === item.id;\n          });\n        } // this.mLoading(false)\n\n      }, 100);\n    },\n    //网银支付渠道切换\n    mChangeBankPayOnline: function mChangeBankPayOnline(item) {\n      this.bankPayOnlineParam = item;\n    },\n    mSubmit: function mSubmit() {\n      var _this5 = this;\n\n      //支付方式\n      if (!this.checkedApiType) {\n        this.mAlert(\"请选择充值方式\");\n        return;\n      }\n\n      if (this.amount < 0) {\n        this.mAlert(\"请输入充值金额\");\n        return;\n      }\n\n      var Amount = _parseFloat(this.amount);\n\n      if (isNaN(Amount)) {\n        this.mAlert(\"您输入的充值金额不正确\");\n        return;\n      }\n\n      if (Amount < this.checkedApiType.minMoney || Amount > this.checkedApiType.maxMoney) {\n        this.mAlert(\"充值金额必须在\" + this.checkedApiType.minMoney + \"~\" + this.checkedApiType.maxMoney + \"元内\");\n        return;\n      }\n\n      if (this.checkedApiType.verificationMoney.indexOf(\",\") > 0) {\n        var arr_money = this.checkedApiType.verificationMoney.split(\",\");\n\n        if ($.inArray(this.amount.toString(), arr_money) < 0) {\n          this.mAlert(\"充值金额必须为【\" + this.checkedApiType.verificationMoney + \"】中的某一个数字\");\n          return;\n        }\n      } else {\n        if (this.checkedApiType.verificationDot > 0) {\n          if (this.amount.toString().indexOf(\".\") > -1) {\n            var arrodt = this.amount.toString().split(\".\");\n\n            if (this.amount == _parseInt(this.amount)) {\n              this.mAlert(\"充值金额必须携带非0小数，如12.6或100.08，请重新调整充值金额\");\n              return;\n            }\n          } else {\n            this.mAlert(\"充值金额必须携带非0小数，如12.6或100.08，请重新调整充值金额\");\n            return;\n          }\n        }\n      }\n\n      var dopage = this.checkedApiType.doPage;\n\n      if (this.checkedApiType.isAjax == 1) {\n        this.mWinOpen(\"二维码扫描\", function () {\n          return import(\"./CreateQrCode\");\n        }, {\n          url: dopage,\n          apiid: this.checkedApiType.apiid,\n          serviceType: this.checkedApiType.serviceType,\n          apitypeid: this.checkedApiType.id,\n          orderAmount: this.amount\n        }, 600, null, function () {\n          _this5.mWinClose();\n        });\n      } else {\n        var paramOrder = {\n          apiid: this.checkedApiType.apiid,\n          serviceType: this.checkedApiType.serviceType,\n          apitypeid: this.checkedApiType.id,\n          orderAmount: this.amount\n        };\n        this.mLoading(true);\n        this.$http.post(dopage, paramOrder).then(function (result) {\n          _this5.mLoading(false);\n\n          if (result.code == \"0\") {\n            var openUrl = decodeURIComponent(result.data.qrcoDepath);\n            window.open(openUrl);\n          } else {\n            _this5.mAlert(result.message);\n          }\n        }).catch(function (error) {\n          _this5.mAlert(\"请求付款地址失败2\");\n        });\n      }\n    }\n  },\n  created: function created() {\n    this.mInit();\n  }\n};",{"version":3,"sources":["FinanceCenter.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    class=\"container user_con\"\n    style=\"margin-top: 72px;\"\n  >\n    <div class=\"user_left fl\">\n      <ul>\n        <li>\n          <router-link :to=\"{name:'UserCenter'}\">个人资料\n          </router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'SafePassword'}\">安全管理\n          </router-link>\n        </li>\n        <li class=\"active\">\n          <router-link :to=\"{name:'FinanceCenter'}\">财务中心\n          </router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'ReportTransfer'}\">客户报表</router-link>\n        </li>\n        <li v-if=\"agnetLevel>0\">\n          <router-link :to=\"{name:'AgentThat'}\">代理管理</router-link>\n        </li>\n        <li v-if=\"agnetLevel>0\">\n          <router-link :to=\"{name:'MembermanAgement'}\">代理报表</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'ServiceCenter'}\">服务中心</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'ConversionRecord'}\">商城中心</router-link>\n        </li>\n      </ul>\n    </div>\n    <div class=\"user_right \">\n      <div class=\"userbasic_head\">\n        <router-link\n          :to=\"{name:'FinanceCenter'}\"\n          class=\"active\"\n        >会员存款</router-link>\n        <router-link :to=\"{name:'FinanceOfflineDeposit'}\">线下存款</router-link>\n        <router-link :to=\"{name:'MemberDrawing'}\">会员提款</router-link>\n        <router-link :to=\"{name:'IndoorTransfer'}\">户内转账</router-link>\n      </div>\n      <div class=\"userbasic_body\">\n        <div class=\"bank_tips\">温馨提示: 如当前支付方式未能支付成功，请您尝试其他支付方式进行支付！</div>\n        <div class=\"account_form\">\n          <form\n            action=\"#\"\n            method=\"get\"\n          >\n            <input\n              type=\"hidden\"\n              id=\"type\"\n              name=\"type\"\n            >\n            <div class=\"line\">\n              <div class=\"tit\">\n                选择存款方式\n              </div>\n              <div class=\"ways\">\n                <div class=\"account_index\">\n                  <span\n                    @click=\"mSelectRechargeType(t.id)\"\n                    :class=\"['ways_box card_pay',{'active':t.selected}]\"\n                    v-for=\"t in rechargeTypes\"\n                    :key=\"t.id\"\n                    v-if=\"t.list.length>0\"\n                  >\n                    <img\n                      :src=\"'/static/images/pay/'+t.rechargeTypeIcon\"\n                      class=\"icon\"\n                    >{{t.rechargeTypeName}}\n                    <em class=\"check\"></em>\n                  </span>\n                  <span\n                    @click=\"mSelectRechargeType(0)\"\n                    class=\"ways_box card_pay\"\n                    v-if=\"!!rechargeOther && rechargeOther.length>0\"\n                  >\n                    <img\n                      src=\"/static/images/pay/account-icon7.png\"\n                      class=\"icon\"\n                    >其他方式\n                    <em class=\"check\"></em>\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div class=\"line\">\n              <div class=\"tit\"></div>\n              <div\n                class=\"ways\"\n                :style=\"{'border-bottom':(!!rechargeOther && rechargeOther.length>0 && !cSelectRechargeType.id)||(cSelectRechargeType.id===7)?'none':''}\"\n              >\n                <!-- 微信、支付宝、网银 -->\n                <div\n                  v-for=\"t in rechargeTypes\"\n                  :key=\"t.id\"\n                  v-if=\"t.list.length>0&&t.selected\"\n                >\n                  <div v-if=\"t.id!==7\">\n                    <RadioGroup v-model=\"sltApiid\">\n                      <Radio\n                        v-for=\"(api,index) in t.list\"\n                        :key=\"index\"\n                        :label=\"api.apiid\"\n                        @click.stop.native=\"mApiOnChange(api)\"\n                        class=\"ways_box card_pay\"\n                      >\n                        <Icon type=\"md-qr-scanner\" />\n                        <span v-text=\"t.rechargeTypeName+api.apiid\"></span>\n                      </Radio>\n                    </RadioGroup>\n                  </div>\n                  <div v-else-if=\"t.id===7\">\n                    <div v-if=\"!!t.list && t.list.length>1\">\n                      <label\n                        class=\"radio-inline\"\n                        for=\"inputRadio1\"\n                        v-for=\"(item,i) in t.list\"\n                        :key=\"i\"\n                      >\n                        <a\n                          href=\"#\"\n                          @click=\"mChangeBankPayOnline(item)\"\n                        >{{'网银支付通道'+(i+1)}}</a>\n                      </label>\n                    </div>\n                    <component\n                      :is=\"selectbankPayOnlines\"\n                      :paramData=\"bankPayOnlineParam\"\n                      v-if=\"!!selectbankPayOnlines\"\n                    ></component>\n                  </div>\n                </div>\n                <!-- 其他 -->\n                <div v-if=\"!!rechargeOther && rechargeOther.length>0 && !cSelectRechargeType.id\" style=\"display: flex\">\n                  <a\n                    v-for=\"(item,i) in rechargeOther\"\n                    :key=\"i\"\n                    :href=\"item.url+'?u='+(!!cLoginUser.username?cLoginUser.username:'')\"\n                    target=\"_blank\"\n                    :title=\"item.tile\"\n                    style=\"vertical-align: middle\"\n                  >\n                    <span class=\"card_pay\" >\n                      <img\n                        v-if=\"!!item.imgUrl\"\n                        :src=\"item.imgUrl\"\n                        style=\"vertical-align: middle;width: 150px;height:65px;box-shadow: 0 0 5px rgba(0, 0, 0, 0.1); margin-left: 10px;float: left\"\n                      >\n                      <span v-else>{{item.tile}}</span>\n                      <em class=\"check\"></em>\n                    </span>\n                  </a>\n                </div>\n              </div>\n            </div>\n            <div\n              class=\"line\"\n              v-if=\"!!cSelectRechargeType.id&&cSelectRechargeType.id!=7\"\n            >\n              <div class=\"tit\">\n                存款金额\n              </div>\n              <div\n                class=\"ways\"\n                style=\"border-bottom:none;\"\n              >\n                <p>\n                  <input\n                    v-model=\"amount\"\n                    type=\"text\"\n                    class=\"inp\"\n                    :placeholder=\"(!!checkedApiType.minMoney?'单笔存款限额（元）'+checkedApiType.minMoney:'请选择存款方式')+(!!checkedApiType.maxMoney?'-'+checkedApiType.maxMoney:'')\"\n                    style=\"width:200px\"\n                  > 元\n                </p>\n                <div v-if=\"quickmoneybtns.length > 0\">\n                  <div class=\"tit\" style=\"margin-left: -100px; font-size: 15px\">快捷金额</div>\n                  <button v-for=\"(am,index) in quickmoneybtns\" v-if=\"am != ''\" class=\"quickmoneybtn\" @click=\"chaconeybtn(am)\"  type=\"button\" style=\"width:55px;height:30px;margin-right:17px;margin-top: 10px;background: #d9d9d9; color: #000000; -webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;display: inline;\">{{am}}</button>\n                </div>\n                <!--<p>-->\n                  <!--<strong-->\n                    <!--style=\"color: red;\"-->\n                    <!--id=\"strongMoneyRange\"-->\n                    <!--v-text=\"!!checkedApiType.verificationMoney?'充值金额须为:' + checkedApiType.verificationMoney+'中的某个数字':checkedApiType.verificationDot==0?'必须为整数':''\"-->\n                  <!--&gt;</strong>-->\n                <!--</p>-->\n                <button\n                  type=\"button\"\n                  class=\"ajax-submit-without-confirm-btn account_save\"\n                  @click=\"mSubmit\"\n                >提交</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport win from \"@/mixins/window\";\nexport default {\n  name: \"FinanceCenter\",\n  mixins: [win],\n  data() {\n    return {\n      agnetLevel: \"\",\n      amount: \"\",\n      quickmoneybtns:[],\n      rechargeTypes: [],\n      rechargeOther: [],\n      sltApiid: \"\",\n      sltApiTimer: undefined,\n      checkedApiType: {},\n\n      selectedBank: {},\n      selectedBankPayOnlinePath: \"\", //选择的网银支付渠道对应的VUE组件路径\n      bankPayOnlineParam: {} //网银支付渠道 动态组件 要传到子组件的参数\n    };\n  },\n  mounted() {\n    this.mLoading(true);\n    this.$http.get(\"/memberUser/memberinfo.json\").then(result => {\n      if (result.code == 0) {\n        this.agnetLevel = result.data.agnetLevel;\n      }\n    });\n  },\n  computed: {\n    //获取选中的网银支付的VUE组件地址\n    selectbankPayOnlines() {\n      if (!!this.bankPayOnlineParam) {\n        let url = this.bankPayOnlineParam.doPage;\n        if (!!url) {\n          var index = url.indexOf(\"recharge/\") + 9;\n          if (index < url.length) {\n            url = url.substring(index, url.length);\n            let name = url.substring(0, url.indexOf(\"/\"));\n            return () => import(\"../pay/bank/\" + name + \"/index\");\n          }\n        }\n        return null;\n      } else {\n        return null;\n      }\n    },\n    cSelectRechargeType() {\n      let a = this.rechargeTypes.find(item => item.selected === true);\n      return a == undefined ? {} : a;\n    }\n  },\n  methods: {\n    mInit() {\n      //线上支付方式\n      this.$http\n        .post(\"/recharge/rechargeType.json?showType=1\")\n        .then(result => {\n          if (result.code == 0) {\n            result.data.apis.forEach((ele, i) => {\n              ele.selected = i === 0;\n              ele.list.forEach(item => (item.checked = false));\n              if (ele.list.length > 0 && ele.list[0].typeid == 7) {\n                this.bankPayOnlines = ele.list;\n                this.mChangeBankPayOnline(this.bankPayOnlines[0]);\n                return;\n              }\n            });\n            this.rechargeTypes = result.data.apis;\n            this.rechargeOther = result.data.others;\n            this.mSelectRechargeType(this.cSelectRechargeType.id);\n          } else {\n            this.mAlert(result.message);\n          }\n        })\n        .catch(error => {\n          console.log(error);\n          this.mAlert(\"请求出错...\");\n        });\n    },\n    // 存款方式 选择\n    mSelectRechargeType(id) {\n      this.rechargeTypes.forEach(item => {\n        item.selected = item.id === id;\n        if (item.selected) {\n          this.mApiOnChange(item.list[0]);\n        }\n      });\n    },\n    chaconeybtn(amount){\n      this.amount = amount;\n    },\n    //支付宝、微信支付渠道切换\n    mApiOnChange(api) {\n      if (this.sltApiTimer) {\n        clearTimeout(this.sltApiTimer);\n      }\n      // this.mLoading(true);\n      this.sltApiTimer = setTimeout(() => {\n        this.checkedApiType = api;\n        this.amount = \"\";\n        var sltType = this.rechargeTypes.find(item => item.selected === true);\n        if (sltType.list) {\n\n          if (api.verificationMoney.indexOf(',')>0){\n            let moneystr_arr = api.verificationMoney.split(\",\");\n            this.quickmoneybtns = moneystr_arr;\n          }else{\n            this.quickmoneybtns=[];\n          }\n\n          sltType.list.forEach(item => {\n            item.checked = api.id === item.id\n          })\n        }\n        // this.mLoading(false)\n      }, 100)\n    },\n    //网银支付渠道切换\n    mChangeBankPayOnline(item) {\n      this.bankPayOnlineParam = item;\n    },\n    mSubmit() {\n      //支付方式\n      if (!this.checkedApiType) {\n        this.mAlert(\"请选择充值方式\");\n        return;\n      }\n      if (this.amount < 0) {\n        this.mAlert(\"请输入充值金额\");\n        return;\n      }\n      let Amount = parseFloat(this.amount);\n      if (isNaN(Amount)) {\n        this.mAlert(\"您输入的充值金额不正确\");\n        return;\n      }\n      if (\n        Amount < this.checkedApiType.minMoney ||\n        Amount > this.checkedApiType.maxMoney\n      ) {\n        this.mAlert(\n          \"充值金额必须在\" +\n            this.checkedApiType.minMoney +\n            \"~\" +\n            this.checkedApiType.maxMoney +\n            \"元内\"\n        );\n        return;\n      }\n      if (this.checkedApiType.verificationMoney.indexOf(\",\") > 0) {\n        let arr_money = this.checkedApiType.verificationMoney.split(\",\");\n        if ($.inArray(this.amount.toString(), arr_money) < 0) {\n          this.mAlert(\n            \"充值金额必须为【\" +\n              this.checkedApiType.verificationMoney +\n              \"】中的某一个数字\"\n          );\n          return;\n        }\n      } else {\n        if (this.checkedApiType.verificationDot > 0) {\n          if (this.amount.toString().indexOf(\".\") > -1) {\n            var arrodt = this.amount.toString().split(\".\");\n            if (this.amount == parseInt(this.amount)) {\n              this.mAlert(\n                \"充值金额必须携带非0小数，如12.6或100.08，请重新调整充值金额\"\n              );\n              return;\n            }\n          } else {\n            this.mAlert(\n              \"充值金额必须携带非0小数，如12.6或100.08，请重新调整充值金额\"\n            );\n            return;\n          }\n        }\n      }\n      let dopage = this.checkedApiType.doPage;\n      if (this.checkedApiType.isAjax == 1) {\n        this.mWinOpen(\n          \"二维码扫描\",\n          () => import(\"./CreateQrCode\"),\n          {\n            url: dopage,\n            apiid: this.checkedApiType.apiid,\n            serviceType: this.checkedApiType.serviceType,\n            apitypeid: this.checkedApiType.id,\n            orderAmount: this.amount\n          },\n          600,\n          null,\n          () => {\n            this.mWinClose();\n          }\n        );\n      } else {\n        let paramOrder = {\n          apiid: this.checkedApiType.apiid,\n          serviceType: this.checkedApiType.serviceType,\n          apitypeid: this.checkedApiType.id,\n          orderAmount: this.amount\n        };\n        this.mLoading(true);\n        this.$http\n          .post(dopage, paramOrder)\n          .then(result => {\n            this.mLoading(false);\n            if (result.code == \"0\") {\n              let openUrl = decodeURIComponent(result.data.qrcoDepath);\n              window.open(openUrl);\n            } else {\n              this.mAlert(result.message);\n            }\n          })\n          .catch(error => {\n            this.mAlert(\"请求付款地址失败2\");\n          });\n      }\n    }\n  },\n  created() {\n    this.mInit();\n  }\n};\n</script>\n\n<style>\n  .bank-list-item input{\n    width:20px;\n  }\n</style>\n"],"sourceRoot":"src/views/Member"}]}