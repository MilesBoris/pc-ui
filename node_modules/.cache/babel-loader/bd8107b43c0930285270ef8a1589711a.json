{"remainingRequest":"/Users/hw/work/memberVueD/node_modules/thread-loader/dist/cjs.js!/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js!/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hw/work/memberVueD/src/views/Member/CreateQrCode.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hw/work/memberVueD/src/views/Member/CreateQrCode.vue","mtime":1552384689500},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _this;\n\nvar djs = null; //倒计时\n\nvar timerCheck = null;\nexport default {\n  props: {\n    paramData: Object,\n    defult: {}\n  },\n  data: function data() {\n    return {\n      isLoading: false,\n      isShowQcode: false,\n      isTimer: 0,\n      orderNo: '',\n      qrcodePath: '',\n      minute: '',\n      second: '',\n      isEnd: false\n    };\n  },\n  methods: {\n    mInit: function mInit() {\n      var _this2 = this;\n\n      var param = {\n        apiid: this.paramData.apiid,\n        serviceType: this.paramData.serviceType,\n        apitypeid: this.paramData.apitypeid,\n        orderAmount: this.paramData.orderAmount\n      };\n      this.isLoading = true;\n      this.$http.post(this.paramData.url, param).then(function (result) {\n        _this2.mLoading(false);\n\n        if (result.code == '0') {\n          _this2.isTimer = result.data.isTimer;\n          _this2.orderNo = result.data.orderNo;\n          _this2.qrcodePath = result.data.qrcoDepath;\n          _this2.isShowQcode = true;\n\n          if (_this2.isTimer * 1 > 0) {\n            _this2.timer();\n          }\n\n          _this2.timerCheck = setTimeout(function () {\n            _this2.checkorder();\n          }, 10000); //console.log(result.data);\n        } else {\n          _this2.mClose();\n        }\n\n        _this2.isLoading = false;\n      }).catch(function (error) {\n        _this2.mClose();\n      });\n    },\n    timer: function timer() {\n      var _this3 = this;\n\n      this.djs = window.setInterval(function () {\n        var d = 0,\n            h = 0; //minute = 0,\n        // second = 0;//时间默认值\n\n        if (_this3.isTimer > 0) {\n          _this3.minute = Math.floor(_this3.isTimer / 60) - d * 24 * 60 - h * 60;\n          _this3.second = Math.floor(_this3.isTimer) - d * 24 * 60 * 60 - h * 60 * 60 - _this3.minute * 60;\n        }\n\n        _this3.isTimer--;\n\n        if (_this3.isTimer <= 0) {\n          _this3.isEnd = true;\n\n          if (_this3.djs != null) {\n            window.clearInterval(_this3.djs);\n          }\n\n          if (_this3.timerCheck != null) {\n            clearTimeout(_this3.timerCheck);\n          }\n        }\n      }, 1000);\n    },\n    checkorder: function checkorder() {\n      var _this4 = this;\n\n      this.$http.post(\"/recharge/rechargeState.json?id=\" + this.orderNo, {}).then(function (result) {\n        if (result.code == 0) {\n          if (result.data == 1 || result.data == 3) {\n            _this4.mAlert(\"恭喜，充值成功！\", function () {\n              _this4.mClose();\n            }, \"success\");\n\n            if (_this4.timerCheck != null) {\n              clearTimeout(_this4.timerCheck);\n            }\n          } else if (result.data == 2) {\n            _this4.mAlert(\"抱歉，充值失败请联系客服！\", function () {\n              _this4.mClose();\n            }, \"error\");\n\n            if (_this4.timerCheck != null) {\n              clearTimeout(_this4.timerCheck);\n            }\n          } else {\n            _this4.timerCheck = setTimeout(function () {\n              _this4.checkorder();\n            }, 2000);\n          }\n        } else {\n          _this4.timerCheck = setTimeout(function () {\n            _this4.checkorder();\n          }, 2000);\n        }\n      });\n    },\n    mClose: function mClose() {\n      this.$emit(\"closecallback\");\n    }\n  },\n  created: function created() {\n    _this = this;\n    this.mInit();\n  },\n  destroyed: function destroyed() {\n    _this = undefined;\n\n    if (this.djs != null) {\n      window.clearInterval(this.djs);\n    }\n\n    if (this.timerCheck != null) {\n      clearTimeout(this.timerCheck);\n    }\n  }\n};",{"version":3,"sources":["CreateQrCode.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div\n      class=\"codeContent\"\n      v-if=\"!isEnd\"\n    >\n      <div style='width: 247px; height: 247px; margin: 0 auto; padding-top: 10px;'>\n        <img\n          v-if=\"isShowQcode\"\n          :src=\"cApi+'/payQRCoder.do?payUrl='+qrcodePath\"\n          style=\"width:247px; height:247px;\"\n        />\n        <!-- <img :src=\"qrcodePath\"  style=\"width:247px; height:247px;\" /> -->\n      </div>\n      <div style=\"font-weight:bold;color:red;text-align:center;padding-top:10px;\">付款及时到账，二维码请勿重复使用</div>\n      <div v-if=\"isTimer>0\">\n        <div\n          style=\"font-weight:bold;text-align:left;padding-left:38px;padding-top:10px;\"\n          v-text=\"'订单号：'+orderNo\"\n        ></div>\n        <div style=\"font-weight:bold;color:green;padding-left:38px;padding-top:10px;\">付款二维码有效时间:\n          <strong><s></s> {{minute}} 分</strong>\n          <strong><s></s> {{second}} 秒</strong>\n        </div>\n      </div>\n      <Spin\n        fix\n        v-if=\"isLoading\"\n      >\n        <Icon\n          type=\"load-c\"\n          size=18\n          class=\"demo-spin-icon-load\"\n        ></Icon>\n        <div>处理中...</div>\n      </Spin>\n    </div>\n    <div\n      class=\"codeContent\"\n      v-if=\"isEnd\"\n    >\n      <div style='margin:0 auto; width:340px;padding-top:20px; text-align:center; color:#ccc;font-weight:bold; font-size:32px;'>\n        <p>付款二维码已过期</p>\n        <p>请重新生成付款码</p>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nvar _this;\nlet djs=null;//倒计时\nlet timerCheck=null;\nexport default {\n    props: {\n        paramData:Object,\n        defult:{}\n    },\n    data(){\n        return{\n            isLoading:false,\n            isShowQcode:false,\n            isTimer:0,\n            orderNo:'',\n            qrcodePath:'',\n            minute:'',\n            second:'',\n            isEnd:false,\n        }\n    },\n    methods: {\n        mInit() {\n            let param={\n                apiid:this.paramData.apiid,\n                serviceType:this.paramData.serviceType,\n                apitypeid:this.paramData.apitypeid,\n                orderAmount:this.paramData.orderAmount,\n            };\n            this.isLoading = true;\n            this.$http.post(this.paramData.url,param).then((result) => {\n                this.mLoading(false);\n                if(result.code=='0')\n                {\n                    this.isTimer=result.data.isTimer;\n                    this.orderNo=result.data.orderNo;\n                    this.qrcodePath=result.data.qrcoDepath;\n                    this.isShowQcode=true;\n                    if ( this.isTimer * 1 >0)\n                    {\n                        this.timer();\n                    }\n                    this.timerCheck= setTimeout(()=>{this.checkorder()}, 10000);\n                    //console.log(result.data);\n                }else{\n                    this.mClose();\n                }\n                this.isLoading = false;\n            }).catch(error=>{\n                this.mClose();\n            });\n        },\n        timer(){\n             this.djs = window.setInterval( () =>{\n                var d = 0,\n                    h = 0;\n                    //minute = 0,\n                   // second = 0;//时间默认值\n                if (this.isTimer > 0) {\n                    this.minute = Math.floor(this.isTimer / 60) - (d * 24 * 60) - (h * 60);\n                    this.second = Math.floor(this.isTimer) - (d * 24 * 60 * 60) - (h * 60 * 60) - (this.minute * 60);\n                }\n                this.isTimer--;\n                if (this.isTimer <= 0) {\n                    this.isEnd=true;\n                    if (this.djs != null) {\n                        window.clearInterval(this.djs);\n                    }\n                    if (this.timerCheck != null) {\n                        clearTimeout(this.timerCheck);\n                    }\n                }\n            }, 1000);\n        },\n        checkorder()\n        {\n             this.$http.post(\"/recharge/rechargeState.json?id=\"+this.orderNo,{}).then((result) => {\n                 if(result.code==0)\n                 {\n                     if(result.data==1 || result.data==3)\n                     {\n                        this.mAlert(\"恭喜，充值成功！\",()=>{this.mClose()},\"success\");\n                        if (this.timerCheck != null) {\n                            clearTimeout(this.timerCheck);\n                        }\n                     }\n                     else if(result.data==2)\n                     {\n                        this.mAlert(\"抱歉，充值失败请联系客服！\",()=>{this.mClose()},\"error\");\n                        if (this.timerCheck != null) {\n                            clearTimeout(this.timerCheck);\n                        }\n                     }\n                     else {\n                        this.timerCheck=setTimeout(()=>{this.checkorder()}, 2000);\n                    }\n                 }\n                 else {\n                    this.timerCheck=setTimeout(()=>{this.checkorder()}, 2000);\n                }\n             });\n        },\n        mClose() {\n            this.$emit(\"closecallback\");\n        },\n    },\n    created() {\n        _this = this;\n        this.mInit();\n    },\n    destroyed() {\n        _this = undefined;\n        if (this.djs != null) {\n            window.clearInterval(this.djs);\n        }\n        if (this.timerCheck != null) {\n            clearTimeout(this.timerCheck);\n        }\n    }\n}\n</script>"],"sourceRoot":"src/views/Member"}]}