{"remainingRequest":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js!/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hw/work/memberVueD/src/views/Activity/IntegralDraw.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hw/work/memberVueD/src/views/Activity/IntegralDraw.vue","mtime":1553573584587},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport window from \"../../mixins/window\";\nexport default {\n  name: \"IntegralDraw\",\n  mixins: [window],\n  data: function data() {\n    return {\n      easejoy_bean: 0,\n      //金豆\n      integral: 0,\n      //积分\n      drawTimes: 0,\n      //剩余抽奖次数\n      luckDraw: [],\n      //中奖名单\n      roulette: [],\n      //轮盘设置\n      switch1: 'false',\n      //剩余次数开关 false关闭 true 开启\n      switch2: 'false',\n      //抽奖积分开关 false关闭 true 开启\n      prize_list: [{\n        icon: \"\",\n        // 奖品图片\n        count: \"\",\n        // 奖品数量\n        name: \"\",\n        // 奖品名称\n        isPrize: \"\" // 该奖项是否为奖品\n\n      }],\n      toast_control: 'false',\n      //抽奖结果弹出框控制器\n      hasPrize: 'false',\n      //是否中奖\n      start_rotating_degree: 0,\n      //初始旋转角度\n      rotate_angle: 0,\n      //将要旋转的角度\n      start_rotating_degree_pointer: 0,\n      //指针初始旋转角度\n      rotate_angle_pointer: 0,\n      //指针将要旋转的度数\n      rotate_transition: \"transform 6s ease-in-out\",\n      //初始化选中的过度属性控制\n      rotate_transition_pointer: \"transform 12s ease-in-out\",\n      //初始化指针过度属性控制\n      click_flag: true,\n      //是否可以旋转抽奖\n      index: 0\n    };\n  },\n  computed: {\n    toast_title: function toast_title() {\n      //恭喜您，活的\n      return this.hasPrize ? \"恭喜您，获得\" +\n      /*this.prize_list[this.index].count + ' ' + */\n      this.prize_list[this.index].prizeName : this.prize_list[this.index].prizeName;\n    },\n    toast_pictrue: function toast_pictrue() {\n      return this.hasPrize ? \"/static/images/activity/congratulation.png\" : \"/static/images/activity/sorry.png\";\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.mLoading(true); //初始化轮盘 加载奖品信息\n\n    this.$http.get(\"/integralDrawC/roulettePrize.json\").then(function (result) {\n      if (result.code == 0) {\n        //this.prize_list = !!result.data?result.data : [];\n        _this.prize_list = !!result.data ? result.data : [];\n      } else {\n        //轮盘活动界面初始化失败，请刷新界面\n        _this.mAlert(\"轮盘活动界面初始化失败，请刷新界面\");\n      }\n    }), //获取中奖名单\n    this.$http.get(\"/integralDrawC/getWinningList.json\").then(function (result) {\n      if (result.code == 0) {\n        _this.luckDraw = !!result.data ? result.data : [];\n\n        if (result.message < 0) {\n          _this.drawTimes = 0;\n        } else {\n          _this.drawTimes = result.message;\n        }\n      } else {\n        //获取中奖名单失效，请刷新界面\n        _this.mAlert(\"获取中奖名单失败，请刷新界面\");\n      }\n    }), //获取轮盘设置信息\n    this.$http.get(\"/integralDrawC/queryRouletteSettingList.json\").then(function (result) {\n      if (result.code == 0) {\n        _this.roulette = !!result.data ? result.data : [];\n\n        if (_this.roulette[0].isDrawTimes) {\n          _this.switch1 = 'true';\n        }\n\n        if (_this.roulette[0].isIntegral) {\n          _this.switch2 = 'true';\n        }\n      } else {\n        //获取轮盘设置失败，请刷新界面\n        _this.mAlert(\"获取轮盘设置失败，请刷新界面\");\n      }\n    }), this.$http.post(\"/memberUser/memberinfo.json\").then(function (result) {\n      if (result.code == 0) {\n        _this.integral = result.data.integral / 100;\n\n        if (_this.integral < 0) {\n          _this.integral = 0;\n        }\n      }\n    }); //字体滚动方法\n\n    /* $(\".txtMarquee-top\").slide({mainCell:\".bd ul\",autoPlay:true,effect:\"topMarquee\",vis:9,interTime:50,pnLoop:false,mouseOverStop:false});*/\n    //公告滚动方法\n\n    /*$(\".txtMarquee-left\").slide({mainCell:\".bd ul\",autoPlay:true,effect:\"leftMarquee\",vis:1,interTime:50});*/\n  },\n  methods: {\n    zhuan: function zhuan() {\n      var _this2 = this;\n\n      if (!this.click_flag) return;\n      this.mLoading(true);\n      this.$http.post(\"/integralDrawC/lotteryDraw.json\", {\n        username: this.cLoginUser.username\n      }).then(function (result) {\n        if (result.code == 0) {\n          //从后台获取奖项id\n          _this2.index = result.message; //指定每次旋转到的奖品下标\n\n          var type = 0; // 默认为 0  转盘转动 1 箭头和转盘都转动(暂且遗留)\n\n          var during_time = 5; // 默认为1s\n\n          var random = Math.floor(Math.random() * 7);\n          var result_index = _this2.index; // 最终要旋转到哪一块，对应prize_list的下标\n\n          var result_angle = [337.5, 292.5, 247.5, 202.5, 157.5, 112.5, 67.5, 22.5]; //最终会旋转到下标的位置所需要的度数\n\n          var rand_circle = 6; // 附加多转几圈，2-3\n\n          _this2.click_flag = false; // 旋转结束前，不允许再次触发\n\n          if (type == 0) {\n            // 转动盘子\n            var rotate_angle = _this2.start_rotating_degree + rand_circle * 360 + result_angle[result_index] - _this2.start_rotating_degree % 360;\n            _this2.start_rotating_degree = rotate_angle;\n            _this2.rotate_angle = \"rotate(\" + rotate_angle + \"deg)\"; // // //转动指针\n\n            /*  this.rotate_angle_pointer = \"rotate(\"+this.start_rotating_degree_pointer + 360*rand_circle+\"deg)\";\n              this.start_rotating_degree_pointer =360*rand_circle;*/\n\n            var that = _this2; // 旋转结束后，允许再次触发\n\n            setTimeout(function () {\n              that.click_flag = true;\n              that.game_over();\n            }, during_time * 1000 + 1500); // 延时，保证转盘转完\n          }\n        } else {\n          _this2.mAlert(result.message, function () {}, \"error\");\n        }\n      }).catch(function (error) {\n        //请稍后再试...\n        _this2.mAlert(\"请稍后再试...\");\n      });\n    },\n    sortKey: function sortKey(array, key) {\n      //排序\n      return array.sort(function (a, b) {\n        var x = a[key];\n        var y = b[key];\n        return x < y ? -1 : x > y ? 1 : 0;\n      });\n    },\n    game_over: function game_over() {\n      this.getIntegral(); //弹窗后重新刷新积分\n\n      this.getDrawTimes(); //刷新次数\n\n      this.toast_control = 'true';\n      this.hasPrize = this.prize_list[this.index].isPrize;\n    },\n    //关闭弹窗\n    close_toast: function close_toast() {\n      this.toast_control = 'false';\n    },\n    getIntegral: function getIntegral() {\n      var _this3 = this;\n\n      this.$http.post(\"/memberUser/memberinfo.json\").then(function (result) {\n        if (result.code == 0) {\n          _this3.integral = result.data.integral / 100;\n\n          if (_this3.integral < 0) {\n            _this3.integral = 0;\n          }\n        }\n      });\n    },\n    getDrawTimes: function getDrawTimes() {\n      var _this4 = this;\n\n      //获取中奖名单\n      this.$http.get(\"/integralDrawC/getWinningList.json\").then(function (result) {\n        if (result.code == 0) {\n          _this4.luckDraw = !!result.data ? result.data : [];\n\n          if (result.message < 0) {\n            _this4.drawTimes = 0;\n          } else {\n            _this4.drawTimes = result.message;\n          }\n        } else {\n          //获取中奖名单失败，请刷新界面\n          _this4.mAlert(\"获取中奖名单失败，请刷新界面\");\n        }\n      });\n    },\n    mOpen: function mOpen() {\n      //中奖纪录页面\n      this.mWinOpen(\"中奖纪录页面\", function () {\n        return import(\"./WinningCheck\");\n      }, {}, 700);\n    }\n  },\n  created: function created() {}\n};",{"version":3,"sources":["IntegralDraw.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div style=\"margin-top: 60px\">\n        <div class=\"banner\">\n            <div class=\"banner-box\">\n                <div class=\"banner-text\" v-for=\"(item,index) in roulette\" :key=\"index\">\n                    <p>活动开始时间:{{item.activityStrartTimeStr}}</p><!-- 活动开始时间-->\n                    <p>活动结束时间:{{item.activityEndTimeStr}}</p><!-- 活动结束时间-->\n\n                </div>\n                <!-- <div class=\"zp\">\n                  <img src=\"/Public/Home/Mobile/images/zhuanpan_c.png\" />\n                </div> -->\n             <!--   <div class=\"zp\">\n                    <img src=\"/static/images/activity/zhuanpan.png\" id=\"zhuanpan_bg\" style=\"transform: rotate(0deg);\">\n                    <a @click=\"zhuan\">\n                    <img src=\"/static/images/activity/zhuanpan_c.png\" id=\"startbtn\">\n                    </a>\n                </div>-->\n                <div class=\"zp\">\n                    <div class=\"wheel-pointer-box\">\n                        <div class=\"wheel-pointer\" @click=\"zhuan()\" :style=\"{transform:rotate_angle_pointer,transition:rotate_transition_pointer}\"></div>\n                    </div>\n                    <div class=\"wheel-bg\" :style=\"{transform:rotate_angle,transition:rotate_transition}\">\n                        <div class=\"prize-list\">\n                            <div class=\"prize-item\" v-for=\"(item,index) in prize_list\" :key=\"index\">\n                                <div class=\"prize-pic\">\n                                    <!--<div :style=\"{backgroundImage:'url('+item.prizePictureAddress+')'}\"></div>-->\n                                    <img :src=\"item.prizePictureAddress\">\n                                </div>\n                                <div class=\"prize-type\">\n                                    {{item.prizeName}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"hot\" style=\"width: auto;\">\n            <div class=\"hot-box\">\n                <ul class=\"list\">\n                    <li v-show=\"switch1=='true'\">剩余抽奖次数：{{drawTimes}}</li><!-- 剩余抽奖次数：-->\n                    <li v-show=\"switch2=='true'\">当前积分: {{integral}}<span id=\"number\"></span></li><!--当前积分： -->\n                    <li> <a @click=\"mOpen(cLoginUser.id)\" class=\"winner-record\" >中奖纪录</a>&nbsp;&nbsp;&nbsp;</li><!--中奖纪录 -->\n                </ul>\n                <div class=\"gdbf\">\n                    <p>最新消息</p><!--最新消息 -->\n                    <div class=\"txtMarquee-left\">\n                        <div class=\"hd\">\n                            <a class=\"next\"></a>\n                            <a class=\"prev\"></a>\n                        </div>\n\n                        <div class=\"bd\">\n                            <ul class=\"infoList\">\n                                <li v-for=\"(item,index) in roulette\" :key=\"index\">\n                                <marquee  width=\"880px\" direction=\"left\"  behavior=\"scroll\"  scrollamount=\"8\"  loop=\"1\"  hspace=\"90\"   vspace=\"50\">\n                                     {{item.advert}}\n                                </marquee>\n                                </li>\n                               <!-- <li>&nbsp;&nbsp;&nbsp;&nbsp; </li>-->\n\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"cont\">\n            <div class=\"cont-box\">\n                <div class=\"cont-title\">\n                    获奖名单\n                </div><!-- 获奖名单-->\n                <div class=\"name-list\">\n                    <div class=\"txtMarquee-top fl\">\n\n                        <div class=\"bd\">\n                            <div class=\"tempWrap\" style=\"overflow:hidden; position:relative; height:172px\">\n                                <ul class=\"infoList\" style=\"height: 300px; position: relative; padding: 0px; margin: 0px;\">\n                                    <marquee behavior=\"scroll\" direction=\"up\" height=\"160\">\n                                        <li class=\"clone\" style=\"height: 24px;\"  v-for=\"(item,index) in luckDraw\" :key=\"index\" v-if='index<20'><!--恭喜  中奖 -->\n                                                <span class=\"span4\">恭喜&nbsp;&nbsp;{{item.winningUser}}</span>&nbsp;&nbsp;&nbsp;&nbsp;中奖\n                                                <span class=\"span5\">{{item.prizeName}}</span>&nbsp;&nbsp;\n                                                <span class=\"span6\">{{item.luckyDrawTimeStr}}</span>\n                                        </li>\n                                    </marquee>\n                            </ul>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"txtMarquee-top fr\">\n                        <div class=\"bd\">\n                            <div class=\"tempWrap\" style=\"overflow:hidden; position:relative; height:172px\">\n                                <ul class=\"infoList\" style=\"height: 300px; position: relative; padding: 0px; margin: 0px;\" >\n                                    <marquee behavior=\"scroll\" direction=\"up\" height=\"160\">\n                                        <li class=\"clone\" style=\"height: 24px;\"  v-for=\"(item,index) in luckDraw \" :key=\"index\" v-if='index>20'><!--恭喜 中奖-->\n                                                <span class=\"span4\">恭喜&nbsp;&nbsp;{{item.winningUser }}</span>&nbsp;&nbsp;&nbsp;&nbsp;中奖\n                                                <span class=\"span5\">{{item.prizeName}}</span>&nbsp;&nbsp;\n                                                <span class=\"span6\">{{item.luckyDrawTimeStr}}</span>\n                                        </li>\n                                    </marquee>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <!--活动条件 -->\n                <div class=\"cont-title\">\n                    活动条件\n                </div>\n                <div class=\"introduce\"  v-for=\"(item,index) in roulette\" :key=\"'ac'+index\">\n                    <p v-html=\"item.activityConditions\"></p>\n                </div>\n                <div class=\"cation\">\n\n                </div>\n                <!-- 奖品说明-->\n                <div class=\"cont-title\">\n                    奖品说明\n                </div>\n                <div class=\"introduce\" v-for=\"(item,index) in roulette\" :key=\"'pd'+index\">\n                    <p v-html=\"item.prizeDescription\"></p>\n                </div>\n                <!-- 活动说明-->\n                <div class=\"cont-title\">\n                    活动说明\n                </div>\n                <div class=\"introduce\"  v-for=\"(item,index) in roulette\" :key=\"'ad'+index\">\n                    <p v-html=\"item.activityDescription\"></p>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"toast\" v-show=\"toast_control=='true'\">\n            <div class=\"toast-container\">\n                <img :src=\"toast_pictrue\" class=\"toast-picture\">\n                <div class=\"close\" @click=\"close_toast()\"></div>\n                <div class=\"toast-title\">\n                    {{toast_title}}\n                </div>\n                <div class=\"toast-btn\">\n                                                                <!-- 关闭-->\n                    <div class=\"toast-cancel\"  @click=\"close_toast\">关闭</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"toast-mask\" v-show=\"toast_control=='true'\"></div>\n    </div>\n</template>\n\n<script>\n    import window from \"../../mixins/window\";\n    export default {\n        name: \"IntegralDraw\",\n        mixins: [window],\n        data() {\n\n            return {\n                easejoy_bean: 0, //金豆\n                integral: 0, //积分\n                drawTimes:0,//剩余抽奖次数\n                luckDraw:[],//中奖名单\n                roulette:[],//轮盘设置\n                switch1:'false',//剩余次数开关 false关闭 true 开启\n                switch2:'false',//抽奖积分开关 false关闭 true 开启\n                prize_list: [{\n                    icon:\"\",// 奖品图片\n                    count: \"\", // 奖品数量\n                    name: \"\", // 奖品名称\n                    isPrize: \"\" // 该奖项是否为奖品\n                }],\n                toast_control: 'false', //抽奖结果弹出框控制器\n                hasPrize: 'false', //是否中奖\n                start_rotating_degree: 0, //初始旋转角度\n                rotate_angle: 0, //将要旋转的角度\n                start_rotating_degree_pointer: 0, //指针初始旋转角度\n                rotate_angle_pointer: 0, //指针将要旋转的度数\n                rotate_transition: \"transform 6s ease-in-out\", //初始化选中的过度属性控制\n                rotate_transition_pointer: \"transform 12s ease-in-out\", //初始化指针过度属性控制\n                click_flag: true, //是否可以旋转抽奖\n                index: 0\n            };\n        },  computed: {\n            toast_title() {\n                //恭喜您，活的\n                return this.hasPrize\n                    ? \"恭喜您，获得\" +/*this.prize_list[this.index].count + ' ' + */this.prize_list[this.index].prizeName\n                    : this.prize_list[this.index].prizeName;\n            },\n            toast_pictrue() {\n                return this.hasPrize\n                    ? \"/static/images/activity/congratulation.png\"\n                    : \"/static/images/activity/sorry.png\";\n            }\n        },\n        mounted(){\n            this.mLoading(true);\n          //初始化轮盘 加载奖品信息\n          this.$http.get(\"/integralDrawC/roulettePrize.json\").then(result =>{\n              if(result.code == 0){\n                    //this.prize_list = !!result.data?result.data : [];\n                    this.prize_list = !!result.data?result.data : [];\n\n              }else{\n                  //轮盘活动界面初始化失败，请刷新界面\n                  this.mAlert(\"轮盘活动界面初始化失败，请刷新界面\");\n              }\n          }),\n         //获取中奖名单\n          this.$http.get(\"/integralDrawC/getWinningList.json\").then(result =>{\n              if(result.code == 0){\n                  this.luckDraw = !!result.data?result.data : [];\n                  if(result.message<0){\n                      this.drawTimes = 0;\n                  }else{\n                      this.drawTimes = result.message;\n                  }\n              }else{\n                  //获取中奖名单失效，请刷新界面\n                  this.mAlert(\"获取中奖名单失败，请刷新界面\");\n              }\n          }),\n          //获取轮盘设置信息\n          this.$http.get(\"/integralDrawC/queryRouletteSettingList.json\").then(result =>{\n              if(result.code == 0){\n                  this.roulette = !!result.data?result.data : [];\n                  if(this.roulette[0].isDrawTimes){\n                      this.switch1='true';\n                  }\n                  if(this.roulette[0].isIntegral){\n                      this.switch2='true';\n                  }\n              }else{\n                  //获取轮盘设置失败，请刷新界面\n                  this.mAlert(\"获取轮盘设置失败，请刷新界面\");\n              }\n          }),\n          this.$http.post(\"/memberUser/memberinfo.json\").then(result => {\n              if (result.code == 0) {\n                  this.integral = result.data.integral/100;\n                  if(this.integral<0){\n                      this.integral=0;\n                  }\n              }\n          });\n            //字体滚动方法\n           /* $(\".txtMarquee-top\").slide({mainCell:\".bd ul\",autoPlay:true,effect:\"topMarquee\",vis:9,interTime:50,pnLoop:false,mouseOverStop:false});*/\n            //公告滚动方法\n            /*$(\".txtMarquee-left\").slide({mainCell:\".bd ul\",autoPlay:true,effect:\"leftMarquee\",vis:1,interTime:50});*/\n        },\n        methods: {\n            zhuan() {\n                if (!this.click_flag) return;\n                this.mLoading(true);\n                this.$http\n                    .post(\"/integralDrawC/lotteryDraw.json\", {\n                        username: this.cLoginUser.username\n                    })\n                    .then(result => {\n                     if (result.code == 0) {\n                    //从后台获取奖项id\n                    this.index = result.message; //指定每次旋转到的奖品下标\n                    var type = 0; // 默认为 0  转盘转动 1 箭头和转盘都转动(暂且遗留)\n                    var during_time = 5; // 默认为1s\n                    var random = Math.floor(Math.random() * 7);\n                    var result_index = this.index ; // 最终要旋转到哪一块，对应prize_list的下标\n                    var result_angle = [337.5, 292.5, 247.5, 202.5, 157.5, 112.5, 67.5, 22.5]; //最终会旋转到下标的位置所需要的度数\n                    var rand_circle = 6; // 附加多转几圈，2-3\n                    this.click_flag = false; // 旋转结束前，不允许再次触发\n                    if (type == 0) {\n                        // 转动盘子\n                        var rotate_angle =\n                            this.start_rotating_degree +\n                            rand_circle * 360 +\n                            result_angle[result_index] -\n                            this.start_rotating_degree % 360;\n                        this.start_rotating_degree = rotate_angle;\n                        this.rotate_angle = \"rotate(\" + rotate_angle + \"deg)\";\n                        // // //转动指针\n                      /*  this.rotate_angle_pointer = \"rotate(\"+this.start_rotating_degree_pointer + 360*rand_circle+\"deg)\";\n                        this.start_rotating_degree_pointer =360*rand_circle;*/\n                        var that = this;\n                        // 旋转结束后，允许再次触发\n                        setTimeout(function() {\n                            that.click_flag = true;\n                             that.game_over();\n                        }, during_time * 1000 + 1500); // 延时，保证转盘转完\n                    }\n                        } else {\n                            this.mAlert(result.message, () => {}, \"error\");\n                        }\n            })\n            .catch(error => {\n                //请稍后再试...\n                    this.mAlert(\"请稍后再试...\");\n            });\n            },\n            sortKey(array,key){//排序\n                return array.sort(function(a,b){\n                        var x = a[key];\n                        var y = b[key];\n                        return ((x<y)?-1:(x>y)?1:0)\n                })},\n                game_over() {\n            this.getIntegral();//弹窗后重新刷新积分\n            this.getDrawTimes();//刷新次数\n            this.toast_control = 'true';\n            this.hasPrize = this.prize_list[this.index].isPrize;\n        },\n        //关闭弹窗\n        close_toast() {\n            this.toast_control = 'false';\n        },\n        getIntegral(){\n            this.$http.post(\"/memberUser/memberinfo.json\").then(result => {\n                if (result.code == 0) {\n                    this.integral = result.data.integral/100;\n                    if(this.integral<0){\n                        this.integral=0;\n                    }\n                }\n            })},\n        getDrawTimes(){\n        //获取中奖名单\n        this.$http.get(\"/integralDrawC/getWinningList.json\").then(result =>{\n        if(result.code == 0){\n            this.luckDraw = !!result.data?result.data : [];\n            if(result.message<0){\n                this.drawTimes = 0;\n            }else{\n                this.drawTimes = result.message;\n            }\n        }else{\n            //获取中奖名单失败，请刷新界面\n            this.mAlert(\"获取中奖名单失败，请刷新界面\");\n        }\n    })},\n        mOpen() {\n                //中奖纪录页面\n            this.mWinOpen(\"中奖纪录页面\",() => import(\"./WinningCheck\"), {},700);\n        }\n        },\n        created() {\n        }\n    };\n</script>\n\n<style scoped>\n    @import \"/static/css/css.css\";\n    @import \"/static/css/style2.css\";\n    .header{\n        background:#000;\n    }\n    .wheel-main {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: relative;\n    }\n    .wheel-bg {\n        width: 500px; height: 500px; float: right;\n        background: url(\"/static/images/activity/draw_wheel.png\") no-repeat center top;\n        background-size: 100%;\n        color: #fff;\n        font-weight: 500;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-content: center;\n        transition: transform 3s ease;\n    }\n    .wheel-pointer-box {\n        position: absolute;\n        top: 48%;\n        left: 58%;\n        z-index: 100;\n        transform: translate(-50%, -60%);\n        width: 300px;\n        height: 300px;\n    }\n    .wheel-pointer {\n        width: 100%;\n        height: 100%;\n        background: url(\"/static/images/activity/zhuanpan_c.png\") no-repeat center top;\n        background-size: 100%;\n        transform-origin: center 60%;\n    }\n    .wheel-bg div {\n        text-align: center;\n    }\n    .prize-list {\n        width: 100%;\n        height: 100%;\n        position: relative;\n    }\n    .prize-list .prize-item {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 2;\n    }\n    .prize-list .prize-item:first-child {\n        top: 20px;\n        left: 232px;\n        transform: rotate(20deg);\n        color: yellow;\n    }\n    .prize-list .prize-item:nth-child(2) {\n        top: 42px;\n        left: 254px;\n        -webkit-transform: rotate(70deg);\n        transform: rotate(70deg);\n        color: yellow;\n    }\n    .prize-list .prize-item:nth-child(3) {\n        top: 80px;\n        left: 252px;\n        -webkit-transform: rotate(-250deg);\n        transform: rotate(-250deg);\n        color: yellow;\n    }\n    .prize-list .prize-item:nth-child(4) {\n        top: 97px;\n        left: 238px;\n        -webkit-transform: rotate(-210deg);\n        transform: rotate(-201deg);\n        color: yellow;\n    }\n    .prize-list .prize-item:nth-child(5) {\n        top: 91px;\n        left: 200px;\n        transform: rotate(-160deg);\n        color: yellow;\n    }\n    .prize-list .prize-item:nth-child(6) {\n        top: 73px;\n        left: 180px;\n        transform: rotate(-111deg);\n        color: yellow;\n    }\n    .prize-list .prize-item:nth-child(7) {\n        top: 44px;\n        left: 180px;\n        transform: rotate(-69deg);\n        color: yellow;\n    }\n    .prize-list .prize-item:nth-child(8) {\n        top: 24px;\n        left: 203px;\n        -webkit-transform: rotate(-20deg);\n        transform: rotate(-24deg);\n        color: yellow;\n    }\n    .prize-item {\n        width: 4.5rem;\n        height: 24rem;\n    }\n\n    .prize-pic img {\n        width: 100%;\n        margin-top: 1.5625rem;\n    }\n    .prize-count {\n        font-size: 20px;\n    }\n    .prize-type {\n        font-size: 16px;\n    }\n    .toast-mask {\n        position: fixed;\n        top: 0;\n        left: 0;\n        background: rgba(0, 0, 0, 0.6);\n        z-index: 10000;\n        width: 100%;\n        height: 100%;\n    }\n    .toast {\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        z-index: 20000;\n        transform: translate(-50%, -50%);\n        width: 350px;\n        background: #fff;\n        border-radius: 1px;\n        padding: 1;\n        background-color: rgb(252, 244, 224);\n    }\n    .toast-container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        border: 1px dotted #fccc6e;\n    }\n    .toast-picture {\n        position: absolute;\n        top: -6.5rem;\n        left: -1.5rem;\n        width: 18.75rem;\n        height: 8.5625rem;\n    }\n    .toast-pictrue-change {\n        position: absolute;\n        top: -1.5rem;\n        left: -1.375rem;\n        width: 17.5rem;\n        height: 3.125rem;\n    }\n    .toast-title {\n        padding: 2.8125rem 0;\n        font-size: 18px;\n        color: #fc7939;\n        text-align: center;\n    }\n    .toast-btn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-bottom: 0.9375rem;\n    }\n    .toast-btn div {\n        background-image: -moz-linear-gradient(\n                -18deg,\n                rgb(242, 148, 85) 0%,\n                rgb(252, 124, 88) 51%,\n                rgb(252, 124, 88) 99%\n        );\n\n        background-image: -ms-linear-gradient(\n                -18deg,\n                rgb(242, 148, 85) 0%,\n                rgb(252, 124, 88) 51%,\n                rgb(252, 124, 88) 99%\n        );\n        background-image: -webkit-linear-gradient(\n                -18deg,\n                rgb(242, 148, 85) 0%,\n                rgb(252, 124, 88) 51%,\n                rgb(252, 124, 88) 99%\n        );\n        box-shadow: 0px 4px 0px 0px rgba(174, 34, 5, 0.7);\n        width: 4.6875rem;\n        height: 1.875rem;\n        border-radius: 1.875rem;\n        text-align: center;\n        line-height: 1.875rem;\n        color: #fff;\n    }\n    .close {\n        position: absolute;\n        top: -0.9375rem;\n        right: -0.9375rem;\n        width: 2rem;\n        height: 2rem;\n        background: url(\"/static/images/activity/close_store.png\") no-repeat center top;\n        background-size: 100%;\n    }\n</style>\n"],"sourceRoot":"src/views/Activity"}]}