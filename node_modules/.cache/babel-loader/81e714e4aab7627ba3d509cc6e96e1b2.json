{"remainingRequest":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js!/Users/hw/work/memberVueD/src/mixins/mixin.js","dependencies":[{"path":"/Users/hw/work/memberVueD/src/mixins/mixin.js","mtime":1557216647130},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"/Users/hw/work/memberVueD/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.function.name\";\nimport { dateFormat } from '../utils/util';\nimport types from '../store/mutation-types';\nimport alert from '../mixins/alert';\nexport default {\n  mixins: [alert],\n  data: function data() {\n    return {\n      realAmount: 0\n    };\n  },\n  computed: {\n    cApi: function cApi() {\n      return process.env.VUE_APP_BASE_API;\n    },\n    sysInfo: function sysInfo() {\n      return this.$store.getters.getSysInfo;\n    },\n    cLoginUser: function cLoginUser() {\n      return this.$store.getters.getLoginUser;\n    },\n    cNeedLogin: function cNeedLogin() {\n      return this.$store.getters.getNeedLogin;\n    }\n  },\n  methods: {\n    mLoading: function mLoading(visible, content) {\n      this.$store.commit(types.UPDATE_LOADING_MODEL_VISIBLE, {\n        visible: !!visible,\n        content: content\n      });\n    },\n    mMemberAmount: function mMemberAmount() {\n      var _this = this;\n\n      if (!this.cNeedLogin) {\n        this.$http.post('/memberUser/memberamount.json').then(function (result) {\n          if (result.code == 0) {\n            _this.realAmount = result.data;\n          }\n        });\n      }\n    },\n    mCheckLoginState: function mCheckLoginState() {\n      this.$store.dispatch(types.LOAD_LOGIN_USER);\n\n      if (this.$store.getters.getNeedLogin) {\n        this.$store.dispatch(types.LOGINOUT_USER);\n        this.$store.dispatch(types.COMMON_GONGGAO, this);\n\n        if (this.$route.name !== 'Reg') {\n          this.$router.push({\n            name: 'Home'\n          });\n        }\n      }\n    },\n    mReLogin: function mReLogin() {\n      if (process.env.NODE_ENV == 'development') {\n        console.log('mReLogin');\n      }\n\n      this.mLoading(false);\n      this.$store.dispatch(types.LOGINOUT_USER);\n      this.mCheckLoginState();\n    },\n    mRefreshAccountInfo: function mRefreshAccountInfo() {\n      this.$store.dispatch(types.ACCOUNT_INFO_REFRESH_DATA, true);\n    },\n    mFormatDate: function mFormatDate(value, fmt) {\n      return dateFormat(value, fmt);\n    },\n    mmLogin: function mmLogin(userName, password, vcode) {\n      var _this2 = this;\n\n      return new _Promise(function (ok, error) {\n        _this2.$http.post(\"/login.json\", {\n          username: userName,\n          password: password,\n          checkcode: vcode\n        }).then(function (result) {\n          if (result.code == 0) {\n            _this2.$store.dispatch(types.SAVE_LOGIN_USER, result.data);\n\n            _this2.mLoading(false);\n\n            _this2.mMemberAmount();\n\n            _this2.$store.dispatch(types.COMMON_GONGGAO, _this2);\n\n            _this2.$router.push({\n              name: \"Home\"\n            });\n\n            ok(result);\n          } else {\n            error(result);\n          }\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/hw/work/memberVueD/src/mixins/mixin.js"],"names":["dateFormat","types","alert","mixins","data","realAmount","computed","cApi","process","env","VUE_APP_BASE_API","sysInfo","$store","getters","getSysInfo","cLoginUser","getLoginUser","cNeedLogin","getNeedLogin","methods","mLoading","visible","content","commit","UPDATE_LOADING_MODEL_VISIBLE","mMemberAmount","$http","post","then","result","code","mCheckLoginState","dispatch","LOAD_LOGIN_USER","LOGINOUT_USER","COMMON_GONGGAO","$route","name","$router","push","mReLogin","NODE_ENV","console","log","mRefreshAccountInfo","ACCOUNT_INFO_REFRESH_DATA","mFormatDate","value","fmt","mmLogin","userName","password","vcode","ok","error","username","checkcode","SAVE_LOGIN_USER"],"mappings":"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","sourcesContent":["import { dateFormat } from '../utils/util'\nimport types from '../store/mutation-types'\nimport alert from '../mixins/alert'\nexport default {\n  mixins: [alert],\n  data() {\n    return {\n      realAmount: 0,\n    }\n  },\n  computed: {\n    cApi: function() {\n      return process.env.VUE_APP_BASE_API\n    },\n    sysInfo: function() {\n      return this.$store.getters.getSysInfo;\n    },\n    cLoginUser: function() {\n      return this.$store.getters.getLoginUser\n    },\n    cNeedLogin() {\n      return this.$store.getters.getNeedLogin\n    }\n  },\n  methods: {\n    mLoading(visible, content) {\n      this.$store.commit(types.UPDATE_LOADING_MODEL_VISIBLE, {\n        visible: !!visible,\n        content\n      })\n    },\n    mMemberAmount () {\n      if (!this.cNeedLogin) {\n        this.$http.post('/memberUser/memberamount.json').then(result => {\n          if (result.code == 0) {\n            this.realAmount = result.data\n          }\n        })\n      }\n    },\n    mCheckLoginState() {\n      this.$store.dispatch(types.LOAD_LOGIN_USER)\n      if (this.$store.getters.getNeedLogin) {\n        this.$store.dispatch(types.LOGINOUT_USER)\n        this.$store.dispatch(types.COMMON_GONGGAO, this)\n        if (this.$route.name !== 'Reg') {\n          this.$router.push({ name: 'Home' })\n        }\n      }\n    },\n    mReLogin() {\n      if (process.env.NODE_ENV == 'development') {\n        console.log('mReLogin')\n      }\n      this.mLoading(false)\n      this.$store.dispatch(types.LOGINOUT_USER)\n      this.mCheckLoginState()\n    },\n    mRefreshAccountInfo() {\n      this.$store.dispatch(types.ACCOUNT_INFO_REFRESH_DATA, true)\n    },\n    mFormatDate(value, fmt) {\n      return dateFormat(value, fmt)\n    },\n    mmLogin(userName, password, vcode) {\n      return new Promise((ok, error) => {\n        this.$http\n          .post(\"/login.json\", {\n            username: userName,\n            password: password,\n            checkcode: vcode\n          })\n          .then(result => {\n            if (result.code == 0) {\n              this.$store.dispatch(types.SAVE_LOGIN_USER, result.data);\n              this.mLoading(false);\n              this.mMemberAmount();\n              this.$store.dispatch(types.COMMON_GONGGAO, this);\n              this.$router.push({ name: \"Home\" });\n              ok(result);\n            } else {\n              error(result);\n            }\n          });\n      });\n    }\n  }\n}\n"]}]}