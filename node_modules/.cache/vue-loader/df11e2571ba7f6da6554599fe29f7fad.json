{"remainingRequest":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hw/work/memberVueD/src/views/Member/AgentDrawing.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hw/work/memberVueD/src/views/Member/AgentDrawing.vue","mtime":1552384689499},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport window from \"../../mixins/window\";\nexport default {\n  name: \"MemberDrawing\",\n  mixins: [window],\n  data() {\n    return {\n      vmCard: {\n        drawAccountName: \"\",\n        drawAccountType: \"\",\n        account: \"\",\n        drawAddress: \"\",\n        bankTypeName: \"\",\n        agentCashBalance: 0\n      },\n      vm: {\n        dealcoin: \"\",\n        coinpwd: \"\"\n      }\n    };\n  },\n  computed: {\n    cAgentCashBalance() {\n      let cb = this.vmCard.agentCashBalance / 100;\n      return cb ? cb : 0;\n    }\n  },\n  mounted() {\n    this.mInit();\n  },\n  methods: {\n    mInit() {\n      this.mLoading(true);\n      this.$http.all([this.mGetAgentCashBalance(), this.mGetBindBank()]).then(\n        this.$http.spread((resAgentCashBalance, rbindbank) => {\n          if (resAgentCashBalance.data == -1) {\n            this.mAlert(\"请先设置资金密码\", () => {\n              this.$router.push({ name: \"SafePassword\" });\n            });\n          } else if (resAgentCashBalance.data == -2) {\n            this.mAlert(\"请先绑定银行卡\", () => {\n              this.mWinOpen(\n                \"新增银行卡\",\n                () => import(\"./AddBankCard\"),\n                {},\n                600\n              );\n            });\n          } else {\n            this.vmCard.agentCashBalance = resAgentCashBalance.data;\n          }\n          if (rbindbank.code == 0) {\n            this.vmCard = Object.assign(this.vmCard, rbindbank.data);\n          }\n          this.mLoading(false);\n        })\n      );\n    },\n    mGetAgentCashBalance() {\n      return this.$http.get(\"/agentUser/agentCashBalance.json\");\n    },\n    mGetBindBank() {\n      return this.$http.get(\"/memberUser/getbindbank.json\");\n    },\n    mSave() {\n      if (this.vm.dealcoin == \"\") {\n        this.mAlert(\"取现金额不能为空\");\n        return;\n      }\n      if (this.vm.dealcoin < 1) {\n        this.mAlert(\"取现金额必须大于1元\");\n        return;\n      }\n      if (this.vm.coinpwd == \"\") {\n        this.mAlert(\"请输入资金密码\");\n        return;\n      }\n      if (this.vm.dealcoin > this.cAgentCashBalance) {\n        this.mAlert(\"余额不足\");\n        return;\n      }\n      this.mLoading(true);\n      let params = Object.assign({}, this.vm);\n      this.$http.post(\"/agentUser/agentcash.json\", params).then(result => {\n        this.mLoading(false);\n        if (result.code == 0) {\n          if (result.data == 0) {\n            this.mAlert(\"提现成功\");\n          } else if (result.data == 1) {\n            this.mAlert(\"请先设置资金密码\", () => {\n              this.$router.push({ name: \"SafePassword\" });\n            });\n          } else if (result.data == 2) {\n            this.mAlert(\"请先绑定银行卡\", () => {\n              this.mWinOpen(\n                \"新增银行卡\",\n                () => import(\"./AddBankCard\"),\n                {},\n                600\n              );\n            });\n          }\n        } else {\n          this.mAlert(result.message);\n        }\n      });\n    }\n  }\n};\n",{"version":3,"sources":["AgentDrawing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AgentDrawing.vue","sourceRoot":"src/views/Member","sourcesContent":["<template>\n  <div\n    class=\"container user_con\"\n    style=\"margin-top: 72px;\"\n  >\n    <div class=\"user_left fl\">\n      <ul>\n        <li>\n          <router-link :to=\"{name:'UserCenter'}\">个人资料</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'SafePassword'}\">安全管理</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'FinanceCenter'}\">财务中心</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'ReportTransfer'}\">客户报表</router-link>\n        </li>\n        <li class=\"active\">\n          <router-link :to=\"{name:'AgentThat'}\">代理管理</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'MembermanAgement'}\">代理报表</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'ServiceCenter'}\">服务中心</router-link>\n        </li>\n        <li>\n          <router-link :to=\"{name:'ConversionRecord'}\">商城中心</router-link>\n        </li>\n      </ul>\n    </div>\n    <div class=\"user_right\">\n      <div class=\"userbasic_head\">\n        <router-link :to=\"{name:'AgentThat'}\">代理说明</router-link>\n        <router-link :to=\"{name:'AgentrEportforms'}\">会员管理</router-link>\n        <router-link :to=\"{name:'OpenAccounts'}\">下级开户</router-link>\n        <router-link :to=\"{name:'OpenInvitation'}\">推广链接</router-link>\n        <router-link :to=\"{name:'LinkManagement'}\">链接管理</router-link>\n        <router-link\n          :to=\"{name:'AgentDrawing'}\"\n          class=\"active\"\n        >分红提现</router-link>\n      </div>\n      <div class=\"userbasic_body\">\n        <!-- <div class=\"bank_tips\">温馨提示：每天提款次数不限 (当天北京时间00:00:00-次日23:59:59)</div> -->\n        <div class=\"line_form\">\n          <form\n            action=\"#\"\n            method=\"post\"\n          >\n            <div class=\"line\">\n              <span class=\"tit\">分红钱包余额</span>\n              <span>\n                <Tag type=\"border\">{{cAgentCashBalance}}</Tag>\n              </span>\n            </div>\n            <div class=\"line\">\n              <span class=\"tit\">开户姓名</span>\n              <span>{{vmCard.drawAccountName}}</span>\n            </div>\n            <div class=\"line\">\n              <span class=\"tit\">收款银行</span>\n              <span>{{vmCard.bankTypeName}}</span>\n            </div>\n            <div class=\"line\">\n              <span class=\"tit\">银行账号</span>\n              <span>{{vmCard.account}}</span>\n            </div>\n            <div class=\"line\">\n              <span class=\"tit\">开户行网点</span>\n              <span>{{vmCard.drawAddress}}</span>\n            </div>\n            <div\n              class=\"line\"\n              v-if=\"cAgentCashBalance>0\"\n            >\n              <span class=\"tit\">提款金额</span>\n              <input\n                type=\"text\"\n                class=\"inp\"\n                :disabled=\"cAgentCashBalance<=0\"\n                v-model=\"vm.dealcoin\"\n                placeholder=\"输入提款金额(最低100)\"\n              >\n              <span class=\"tips error-tips\">提款金额不能少于100元</span>\n            </div>\n            <div\n              class=\"line\"\n              v-if=\"cAgentCashBalance>0\"\n            >\n              <span class=\"tit\">取款密码</span>\n              <input\n                type=\"password\"\n                class=\"inp\"\n                :disabled=\"cAgentCashBalance<=0\"\n                v-model=\"vm.coinpwd\"\n                placeholder=\"请输入支付密码\"\n                maxlength=\"6\"\n              >\n            </div>\n            <div\n              class=\"line\"\n              v-if=\"cAgentCashBalance>0\"\n            >\n              <span class=\"tit\"></span>\n              <button\n                type=\"button\"\n                :disabled=\"cAgentCashBalance<=0\"\n                class=\"ajax-submit-without-confirm-btn account_save\"\n                @click=\"mSave\"\n              >确定</button>\n            </div>\n            <div\n              class=\"line\"\n              v-if=\"cAgentCashBalance<=0\"\n            >\n              <span class=\"tit\"></span>\n              <span class=\"tips error-tips\">分红钱包余额暂不支持取现</span>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport window from \"../../mixins/window\";\nexport default {\n  name: \"MemberDrawing\",\n  mixins: [window],\n  data() {\n    return {\n      vmCard: {\n        drawAccountName: \"\",\n        drawAccountType: \"\",\n        account: \"\",\n        drawAddress: \"\",\n        bankTypeName: \"\",\n        agentCashBalance: 0\n      },\n      vm: {\n        dealcoin: \"\",\n        coinpwd: \"\"\n      }\n    };\n  },\n  computed: {\n    cAgentCashBalance() {\n      let cb = this.vmCard.agentCashBalance / 100;\n      return cb ? cb : 0;\n    }\n  },\n  mounted() {\n    this.mInit();\n  },\n  methods: {\n    mInit() {\n      this.mLoading(true);\n      this.$http.all([this.mGetAgentCashBalance(), this.mGetBindBank()]).then(\n        this.$http.spread((resAgentCashBalance, rbindbank) => {\n          if (resAgentCashBalance.data == -1) {\n            this.mAlert(\"请先设置资金密码\", () => {\n              this.$router.push({ name: \"SafePassword\" });\n            });\n          } else if (resAgentCashBalance.data == -2) {\n            this.mAlert(\"请先绑定银行卡\", () => {\n              this.mWinOpen(\n                \"新增银行卡\",\n                () => import(\"./AddBankCard\"),\n                {},\n                600\n              );\n            });\n          } else {\n            this.vmCard.agentCashBalance = resAgentCashBalance.data;\n          }\n          if (rbindbank.code == 0) {\n            this.vmCard = Object.assign(this.vmCard, rbindbank.data);\n          }\n          this.mLoading(false);\n        })\n      );\n    },\n    mGetAgentCashBalance() {\n      return this.$http.get(\"/agentUser/agentCashBalance.json\");\n    },\n    mGetBindBank() {\n      return this.$http.get(\"/memberUser/getbindbank.json\");\n    },\n    mSave() {\n      if (this.vm.dealcoin == \"\") {\n        this.mAlert(\"取现金额不能为空\");\n        return;\n      }\n      if (this.vm.dealcoin < 1) {\n        this.mAlert(\"取现金额必须大于1元\");\n        return;\n      }\n      if (this.vm.coinpwd == \"\") {\n        this.mAlert(\"请输入资金密码\");\n        return;\n      }\n      if (this.vm.dealcoin > this.cAgentCashBalance) {\n        this.mAlert(\"余额不足\");\n        return;\n      }\n      this.mLoading(true);\n      let params = Object.assign({}, this.vm);\n      this.$http.post(\"/agentUser/agentcash.json\", params).then(result => {\n        this.mLoading(false);\n        if (result.code == 0) {\n          if (result.data == 0) {\n            this.mAlert(\"提现成功\");\n          } else if (result.data == 1) {\n            this.mAlert(\"请先设置资金密码\", () => {\n              this.$router.push({ name: \"SafePassword\" });\n            });\n          } else if (result.data == 2) {\n            this.mAlert(\"请先绑定银行卡\", () => {\n              this.mWinOpen(\n                \"新增银行卡\",\n                () => import(\"./AddBankCard\"),\n                {},\n                600\n              );\n            });\n          }\n        } else {\n          this.mAlert(result.message);\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style>\n</style>"]}]}