{"remainingRequest":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hw/work/memberVueD/src/components/PageHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hw/work/memberVueD/src/components/PageHeader.vue","mtime":1557214441352},{"path":"/Users/hw/work/memberVueD/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hw/work/memberVueD/node_modules/cache-loader/dist/cjs.js","mtime":1552395991950},{"path":"/Users/hw/work/memberVueD/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport types from '@/store/mutation-types'\nimport message from '@/mixins/message'\nimport {mapState} from 'vuex';\n\nlet timer;\nexport default {\n  name: 'PageHeader',\n  mixins: [message],\n  data () {\n    return {\n      vcodeurl: '',\n      username: '',\n      password: '',\n      checkcode: '',\n      amount: 0,\n      webnav: [],\n      nameurl: '',\n      heartTimer: null,\n      phoneAreaCode: [],\n      getCodes: true,\n      areaCode: '+86',\n      phone: '',\n      verifyCode: '',\n    }\n  },\n  computed: {\n    ...mapState({\n      apiKey: state => state.common.systemSettings.apiKey,\n    }),\n    cNeedLogin () {\n      return this.$store.getters.getNeedLogin\n    },\n    getpclongLogo () {\n      return this.$store.getters.getSysPicObj.pclongLogo\n    },\n  },\n  mounted () {\n    this.mMemberAmount()\n    this.$http.post('/webnav.json', { sysId: 0 }).then(result => {\n      if (result.code == 0) {\n        this.webnav = !!result.data.companyCustomGametypes\n          ? result.data.companyCustomGametypes\n          : []\n      }\n    })\n\n    this.mHeart()\n    this.$watch('cNeedLogin', function (n, o) {\n      if (!n) {\n        this.mHeart()\n      }\n    })\n\n    if(this.apiKey){\n      $('#mobile_login_before').show()\n    }\n    else{\n      $('#index_login_before').show()\n    }\n\n  },\n  methods: {\n    mNameUrl (webnav) {\n      if (webnav.typeId == 1) {\n        return 'LiveCasino'\n      } else if (webnav.typeId == 50) {\n        return 'CatchFish'\n      } else if (webnav.typeId == 5) {\n        return 'eGames'\n      } else if (webnav.typeId == 4) {\n        return 'Esports'\n      } else if (webnav.typeId == 3) {\n        return 'Lottory'\n      } else if (webnav.typeId == 6) {\n        return 'egames-poket'\n      }\n    },\n    mEnName (webnav) {\n      if (webnav.typeId == 1) {\n        return 'Live Casino'\n      } else if (webnav.typeId == 50) {\n        return 'Catch Fish'\n      } else if (webnav.typeId == 5) {\n        return 'Slots'\n      } else if (webnav.typeId == 4) {\n        return 'Sports'\n      } else if (webnav.typeId == 3) {\n        return 'Lottory'\n      } else if (webnav.typeId == 6) {\n        return 'Poket'\n      }\n    },\n    mEnter301Game () {\n      if (this.cNeedLogin) {\n        this.mAlert('请先登陆！')\n        return\n      }\n      this.mLoading(true)\n      this.$http\n        .post('/managerGame/getMemberGameUrl.json', {\n          username: this.cLoginUser.username,\n          gameCompanyId: 301,\n          gameId: 'ws00'\n          // comGameType: \"50\"\n        })\n        .then(result => {\n          this.mLoading(false)\n          if (result.code == 0) {\n            setTimeout(() => {\n              var winHandler = window.open('', '_blank')\n              winHandler.location.href = result.data.dgUrl.pcUrl\n            }, 300)\n          } else {\n            this.mAlert(result.message)\n          }\n        })\n        .catch(error => {\n          this.mAlert('游戏正忙，请稍后再试...')\n        })\n    },\n    mEnterGame (roomId) {\n      if (this.cNeedLogin) {\n        this.mAlert('请先登陆！')\n        return\n      }\n      this.mLoading(true)\n      this.$http\n        .post('/managerGame/getMemberGameUrl.json', {\n          username: this.cLoginUser.username,\n          gameCompanyId: roomId,\n          gameId: 0\n        })\n        .then(result => {\n          this.mLoading(false)\n          if (result.code == 0) {\n            setTimeout(() => {\n              var winHandler = window.open('', '_blank')\n              winHandler.location.href = result.data.dgUrl.pcUrl\n            }, 300)\n          } else {\n            this.mAlert(result.message)\n          }\n        })\n        .catch(error => {\n          this.mAlert('游戏正忙，请稍后再试...')\n        })\n    },\n    mVCode () {\n      this.checkcode = ''\n      this.vcodeurl = `${this.cApi}/checkCode.json?t=${Math.random()}&token=${\n        this.$store.getters.getSessionToken\n        }`\n    },\n    toggleState () {\n      this.$store.commit('toggleLoginState')\n    },\n    mLogin () {\n      if (!this.username) {\n        this.mAlert('请输入用户名和密码！', () => {\n          this.$refs.username.focus()\n        })\n        return\n      }\n      if (!this.password) {\n        this.mAlert('请输入用户名和密码！', () => {\n          this.$refs.password.focus()\n        })\n        return\n      }\n      if (!this.checkcode) {\n        this.mAlert('请输入验证码', () => {\n          this.$refs.checkcode.focus()\n        })\n        return\n      }\n      this.mLoading(true, '登陆中...')\n      this.$http\n        .post('/login.json', {\n          username: this.username,\n          password: this.password,\n          checkcode: this.checkcode\n        })\n        .then(result => {\n          if (result.code === 0) {\n            this.$store.dispatch(types.SAVE_LOGIN_USER, result.data)\n            this.mLoading(false)\n            this.mMessage(\n              '登陆成功！',\n              () => {\n                this.$store.dispatch(types.COMMON_GONGGAO, this)\n                this.toggleState()\n                this.mMemberAmount()\n              },\n              'success',\n              0.5\n            )\n          } else {\n            this.mAlert(\n              result.message,\n              () => {\n                this.isLogining = false\n                this.mVCode()\n              },\n              'error',\n              null,\n              null,\n              1\n            )\n          }\n        })\n    },\n    mPhoneLogin(){\n      if (this.phone.trim() == \"\") {\n        this.mAlert('请输入手机号码！'); //请输入手机号码\n        return;\n      }\n      if (this.verifyCode.trim() == \"\") {\n        this.mAlert('请输入手机验证码！') ; //\n        return;\n      }\n      this.mLoading(true);\n      this.$http.post(\"/memberUser/quickLogin.json\", {phoneNo:this.phone,areaCode:this.areaCode,verifyCode:this.verifyCode}).then(result => {\n        this.mLoading(false);\n        if (result.code == 0) {\n          this.$store.dispatch(types.SAVE_LOGIN_USER, result.data);\n          this.mLoading(false);\n          this.mMessage(\n            \"登陆成功！\",\n            () => {\n              if(result.data.isNewMember==1){\n                this.mConfirm('您的初始密码是123456, 是否前去修改?', () => {\n                  this.$router.push({name: 'LoginPassword'})\n                })\n              }\n              this.$store.dispatch(types.COMMON_GONGGAO, this);\n              this.$router.push({ name: \"Home\" });\n            },\n            \"success\",\n            0.5\n          );\n        } else {\n          this.mVCode();\n          this.verifyCode='';\n          // this.$Message.error(result.message);\n        }\n      });\n    },\n    mLoginOut () {\n      this.mConfirm('确定要退出吗？', () => {\n        this.mLoading(true, '请稍等...')\n        this.$http.post('/logout.json').then(result => {\n          if (result.code === 0) {\n            sessionStorage.removeItem(types.SESSION_TOKEN)\n            this.$store.commit(types.SESSION_TOKEN)\n            this.$store.dispatch(types.LOGINOUT_USER)\n            this.mLoading(false)\n            this.mReLogin()\n          }\n        })\n      })\n    },\n    mEnter601Game () {\n      if (this.cNeedLogin) {\n        this.mAlert('请先登陆！')\n        return\n      }\n      this.mLoading(true)\n      this.$http\n        .post('/managerGame/getMemberGameUrl.json', {\n          username: this.cLoginUser.username,\n          gameCompanyId: 601,\n          gameId: 0\n        })\n        .then(result => {\n          this.mLoading(false)\n          if (result.code == 0) {\n            setTimeout(() => {\n              var winHandler = window.open('', '_blank')\n              winHandler.location.href = result.data.dgUrl.pcUrl\n            }, 300)\n          } else {\n            this.mAlert(result.message)\n          }\n        })\n        .catch(error => {\n          this.mAlert('游戏正忙，请稍后再试...')\n        })\n    },\n    mHeart () {\n      if (!this.cNeedLogin) {\n        if (this.heartTimer) {\n          clearTimeout(this.heartTimer)\n        }\n        this.$http.post('/checkOnline.json').then(res => {\n          if (res.code == 0) {\n            this.heartTimer = setTimeout(() => {\n              this.mHeart()\n            }, 3 * 1000)\n          }\n        })\n      } else {\n        if (this.heartTimer) {\n          clearTimeout(this.heartTimer)\n        }\n      }\n    },\n    getCode() {\n      if (this.getCodes) {\n        if (this.phone.trim() == \"\") {\n          this.mAlert('请输入手机号码!'); //请输入手机号码\n          return;\n        }\n        let time = 60;\n        this.getCodes = false;\n        timer = setInterval(() => {\n          if (time >= 1) {\n            time--;\n            $('.bg-code').text(time + ' 秒')\n          } else {\n            this.getCodes = true;\n            clearInterval(timer);\n            $('.bg-code').text('获取验证码');\n            console.log(1)\n          }\n        }, 1000)\n\n        this.$http.post(\"/memberUser/sendVerifyCode.json\", {\n          mobile: this.phone,\n          areaCode: this.areaCode\n        }).then(result => {\n          if (result.code == 0) {\n            this.$Message.success('验证码已发送!');\n          } else {\n            this.$Message.error(result.message);\n          }\n        })\n      }\n    }\n  },\n  created () {\n    this.mVCode()\n    this.mCheckLoginState()\n    this.$http.post('/phoneAreaCode.json').then(result => {\n      if (result.code == 0) {\n        this.phoneAreaCode = result.data.codes\n      } else {\n        this.$Message.error(result.message)\n      }\n    })\n    window.onscroll = function () {\n      let scrollheight = document.body.scrollTop == 0 ? document.documentElement.scrollTop\n        : document.body.scrollTop\n      if (scrollheight >= 45) {\n        document.querySelector('.navigation').classList.add('fixed')\n      } else {\n        document.querySelector('.navigation').classList.remove('fixed')\n      }\n\n    }\n  }\n}\n",{"version":3,"sources":["PageHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"PageHeader.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"header_bgbox\" style=\"height: 42px;\">\n        <div class=\"header view view-slideup off\">\n            <div class=\"top\">\n                <div>\n                    <a href=\"/index.html\">\n                        <img :src=\"getpclongLogo\" style=\"margin-top: 0px;\" height=\"45px\">\n                    </a>\n                </div>\n\n                <div class=\"right-nav\">\n                    <div v-if=\"cNeedLogin\" class=\"need-login\">\n                        <span onclick=\"$('#mobile_login_before').toggle();$('#index_login_before').hide()\" v-show=\"apiKey\">手机登录</span>\n                        <span onclick=\"$('#index_login_before').toggle();$('#mobile_login_before').hide()\">账号登录</span>\n                        <span><router-link :to=\"{name:'Reg'}\"  onclick=\"$('#index_login_before').hide();$('#mobile_login_before').hide()\" style=\"color:#fff\">注册</router-link></span>\n                        <router-link :to=\"{name:'FreeDemo'}\" class=\"free-demo\" style=\"background-color: #c0c09ecf;\">\n                            免费试玩\n                        </router-link>\n                    </div>\n\n                    <!--登录后-->\n                    <div id=\"login_after\" class=\"top-right\" v-else>\n                        <div class=\"tools\">\n                            <div class=\"notifications tool\">\n                                <i class=\"tool-icon tool-icon1\"></i>\n\n                                <div class=\"subnav msg-subnav\">\n                                    <i class=\"up\"></i>\n                                    <div class=\"messages havemsg\">\n                                        <div class=\"sub-t\">查看消息\n                                            <router-link :to=\"{name:'MessageList'}\" class=\"more\">立即查看</router-link>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"user\" style=\"display: block\">\n                            <div class=\"user-info\">\n                                <h5 class=\"username\" v-text=\"cLoginUser.username\"></h5>\n                                <h5 class=\"username\">用户ID：{{cLoginUser.id}}</h5>\n                                <h5 class=\"user-balance\">¥ <span id=\"login_user_money\" v-text=\"realAmount / 100\"></span>\n                                </h5>\n                            </div>\n\n                            <div class=\"user-img user-img1\">\n                                <div class=\"user-nav\">\n                                    <i class=\"up el-icon-caret-top\"></i>\n                                    <router-link :to=\"{name:'UserCenter'}\" class=\"router-link\">\n                                        <i class=\"router-icon vipCenter\"></i>会员中心\n                                    </router-link>\n                                    <router-link :to=\"{name:'FinanceCenter'}\" class=\"goto_deposit_money\">\n                                        <i class=\"router-icon deposit\"></i>存款\n                                    </router-link>\n                                    <router-link :to=\"{name:'MemberDrawing'}\">\n                                        <i class=\"router-icon tikuan\"></i>取款\n                                    </router-link>\n                                    <router-link :to=\"{name:'IndoorTransfer'}\">\n                                        <i class=\"router-icon edu\"></i>额度转换\n                                    </router-link>\n                                    <router-link :to=\"{name:'ReportTransfer'}\">\n                                        <i class=\"router-icon report\"></i>账户记录\n                                    </router-link>\n                                    <router-link :to=\"{name:'IntegralDraw'}\">\n                                        <i class=\"router-icon lotteryDraw\"></i>幸运大转盘\n                                    </router-link>\n                                    <router-link :to=\"{name:'Exchange'}\">\n                                        <i class=\"router-icon score\"></i>积分商城\n                                    </router-link>\n                                    <a href=\"###\" id=\"su-logout\" @click=\"mLoginOut\">\n                                        <i class=\"router-icon loginout\"></i>登出\n                                    </a>\n                                </div>\n                            </div>\n                            <i class=\"icon\"></i>\n                        </div>\n                    </div>\n                </div>\n                <!-- before login 登录前-->\n                <div class=\"login-right animated flipInY\" id=\"index_login_before\" v-if=\"cNeedLogin\">\n                    <div class=\"user-login\">\n                        <div class=\"login-title\">账号登录</div>\n                        <div style=\"display: flex;justify-content: flex-start;flex-direction: column;width:80%;\">\n                            <div class=\"login-panel\">\n                                <i class=\"userIcon\"></i>\n                                <input ref=\"username\" v-model=\"username\" placeholder=\"请输入用户名\" clearable\n                                       class=\"login-input\"/>\n                            </div>\n                            <div class=\"login-panel\">\n                                <i class=\"userPwd\"></i>\n                                <input ref=\"password\" v-model=\"password\" type=\"password\" placeholder=\"请输入密码\" clearable\n                                       class=\"login-input\"/>\n                            </div>\n                            <div class=\"login-panel\">\n                                <i class=\"userCheck\"></i>\n                                <input v-model=\"checkcode\" @keyup.enter=\"mLogin\" maxlength=\"4\" placeholder=\"验证码\"\n                                       clearable class=\"login-input\" style=\" width: 100px;\"/>\n                                <img :src=\"vcodeurl\" @click=\"mVCode()\" class=\"vertifyCode\"/>\n                            </div>\n                        </div>\n                        <el-button type=\"primary\"\n                                   @click=\"mLogin\"\n                                   style=\"width:80%;margin-top: 20px;font-size: 16px;height: 40px;\"\n                        >\n                            登 录\n                        </el-button>\n                    </div>\n\n                </div>\n                <div class=\"login-right animated flipInY\" id=\"mobile_login_before\" v-if=\"cNeedLogin\">\n                    <div class=\"user-login\">\n                        <div class=\"login-title\">手机登录</div>\n                        <div style=\"display: flex;justify-content: flex-start;flex-direction: column;width:80%;\">\n                            <div class=\"login-panel\">\n                                <i class=\"userGlobal\"></i>\n                                <el-select v-model=\"areaCode\" filterable placeholder=\"请选择\" class=\"area\">\n                                    <el-option v-for=\"(item,index) in phoneAreaCode\"\n                                               :key=\"index\"\n                                               :label=\"item.value+'  '+item.code\"\n                                               :value=\"item.code\"\n                                    >\n                                    </el-option>\n                                </el-select>\n                            </div>\n                            <div class=\"login-panel\">\n                                <i class=\"userPhone\"></i>\n                                <input ref=\"username\" v-model=\"phone\" placeholder=\"请输入手机号\" clearable\n                                       class=\"login-input\"/>\n                            </div>\n                            <div class=\"login-panel\" style=\"position: relative\">\n                                <i class=\"userCheck\"></i>\n                                <input v-model=\"verifyCode\" @keyup.enter=\"mLogin\" maxlength=\"4\" placeholder=\"验证码\"\n                                       clearable class=\"login-input\"/>\n                                <div class=\"bg-code\" @click=\"getCode\">获取验证码</div>\n                            </div>\n                        </div>\n                        <el-button type=\"primary\"\n                                   @click=\"mPhoneLogin\"\n                                   style=\"width:80%;margin-top: 20px;font-size: 16px;height: 40px;\"\n                        >\n                            登 录\n                        </el-button>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        <div class=\"navigation\">\n            <div class=\"content view view-slideup on\" style=\"display: flex;justify-content: flex-start\">\n                <div class=\"top-logo animated tada\">\n                    <a href=\"/index.html\">\n                        <img :src=\"getpclongLogo\" style=\"margin-top: 6px;\" height=\"45px\">\n                    </a>\n                </div>\n                <ul>\n                    <li class=\"first\">\n                        <router-link :to=\"{name:'Home'}\">首页</router-link>\n                        <span class=\"dot-line\"></span>\n                    </li>\n                    <li v-for=\"(web,index) in webnav\" :key=\"index\" v-if=\" web.typeId!=2 &&web.typeId!=7\">\n                        <router-link :to=\"mNameUrl(web)\">{{web.typeName}}</router-link>\n                        <span class=\"dot-line\"></span>\n                    </li>\n                    <!--<li class=\"\">-->\n                        <!--<router-link :to=\"{name:'LiveCasino'}\">真人视讯</router-link>-->\n                        <!--<span class=\"dot-line\"></span></li>-->\n                    <!--<li class=\"\">-->\n                        <!--<router-link :to=\"{name:'eGames'}\">电子游戏</router-link>-->\n                        <!--<span class=\"dot-line\"></span></li>-->\n                    <!--<li class=\"\">-->\n                        <!--<router-link :to=\"{name:'CatchFish'}\">捕鱼游戏</router-link>-->\n                        <!--<span class=\"dot-line\"></span></li>-->\n                    <!--<li class=\"\">-->\n                        <!--<router-link :to=\"{name:'Esports'}\">体育竞猜</router-link>-->\n                        <!--<span class=\"dot-line\"></span></li>-->\n                    <!--<li class=\"\">-->\n                        <!--<router-link :to=\"{name:'Lottory'}\">传统彩票</router-link>-->\n                        <!--<span class=\"dot-line\"></span></li>-->\n                    <!--<li class=\"\">-->\n                        <!--<router-link :to=\"{name:'Poket'}\">棋牌游戏</router-link>-->\n                        <!--<span class=\"dot-line\"></span></li>-->\n                    <li class=\"\" v-if=\"webnav.filter(item=>item.typeId==7).length>0\">\n                        <a @click=\"mEnterGame(700)\" target=\"_blank\">电竞游戏</a> <span class=\"dot-line\"></span>\n                    </li>\n                    <li class=\"last\">\n                        <router-link :to=\"{name:'Activities'}\">最新优惠</router-link>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n  import types from '@/store/mutation-types'\n  import message from '@/mixins/message'\n  import {mapState} from 'vuex';\n\n  let timer;\n  export default {\n    name: 'PageHeader',\n    mixins: [message],\n    data () {\n      return {\n        vcodeurl: '',\n        username: '',\n        password: '',\n        checkcode: '',\n        amount: 0,\n        webnav: [],\n        nameurl: '',\n        heartTimer: null,\n        phoneAreaCode: [],\n        getCodes: true,\n        areaCode: '+86',\n        phone: '',\n        verifyCode: '',\n      }\n    },\n    computed: {\n      ...mapState({\n        apiKey: state => state.common.systemSettings.apiKey,\n      }),\n      cNeedLogin () {\n        return this.$store.getters.getNeedLogin\n      },\n      getpclongLogo () {\n        return this.$store.getters.getSysPicObj.pclongLogo\n      },\n    },\n    mounted () {\n      this.mMemberAmount()\n      this.$http.post('/webnav.json', { sysId: 0 }).then(result => {\n        if (result.code == 0) {\n          this.webnav = !!result.data.companyCustomGametypes\n            ? result.data.companyCustomGametypes\n            : []\n        }\n      })\n\n      this.mHeart()\n      this.$watch('cNeedLogin', function (n, o) {\n        if (!n) {\n          this.mHeart()\n        }\n      })\n\n      if(this.apiKey){\n        $('#mobile_login_before').show()\n      }\n      else{\n        $('#index_login_before').show()\n      }\n\n    },\n    methods: {\n      mNameUrl (webnav) {\n        if (webnav.typeId == 1) {\n          return 'LiveCasino'\n        } else if (webnav.typeId == 50) {\n          return 'CatchFish'\n        } else if (webnav.typeId == 5) {\n          return 'eGames'\n        } else if (webnav.typeId == 4) {\n          return 'Esports'\n        } else if (webnav.typeId == 3) {\n          return 'Lottory'\n        } else if (webnav.typeId == 6) {\n          return 'egames-poket'\n        }\n      },\n      mEnName (webnav) {\n        if (webnav.typeId == 1) {\n          return 'Live Casino'\n        } else if (webnav.typeId == 50) {\n          return 'Catch Fish'\n        } else if (webnav.typeId == 5) {\n          return 'Slots'\n        } else if (webnav.typeId == 4) {\n          return 'Sports'\n        } else if (webnav.typeId == 3) {\n          return 'Lottory'\n        } else if (webnav.typeId == 6) {\n          return 'Poket'\n        }\n      },\n      mEnter301Game () {\n        if (this.cNeedLogin) {\n          this.mAlert('请先登陆！')\n          return\n        }\n        this.mLoading(true)\n        this.$http\n          .post('/managerGame/getMemberGameUrl.json', {\n            username: this.cLoginUser.username,\n            gameCompanyId: 301,\n            gameId: 'ws00'\n            // comGameType: \"50\"\n          })\n          .then(result => {\n            this.mLoading(false)\n            if (result.code == 0) {\n              setTimeout(() => {\n                var winHandler = window.open('', '_blank')\n                winHandler.location.href = result.data.dgUrl.pcUrl\n              }, 300)\n            } else {\n              this.mAlert(result.message)\n            }\n          })\n          .catch(error => {\n            this.mAlert('游戏正忙，请稍后再试...')\n          })\n      },\n      mEnterGame (roomId) {\n        if (this.cNeedLogin) {\n          this.mAlert('请先登陆！')\n          return\n        }\n        this.mLoading(true)\n        this.$http\n          .post('/managerGame/getMemberGameUrl.json', {\n            username: this.cLoginUser.username,\n            gameCompanyId: roomId,\n            gameId: 0\n          })\n          .then(result => {\n            this.mLoading(false)\n            if (result.code == 0) {\n              setTimeout(() => {\n                var winHandler = window.open('', '_blank')\n                winHandler.location.href = result.data.dgUrl.pcUrl\n              }, 300)\n            } else {\n              this.mAlert(result.message)\n            }\n          })\n          .catch(error => {\n            this.mAlert('游戏正忙，请稍后再试...')\n          })\n      },\n      mVCode () {\n        this.checkcode = ''\n        this.vcodeurl = `${this.cApi}/checkCode.json?t=${Math.random()}&token=${\n          this.$store.getters.getSessionToken\n          }`\n      },\n      toggleState () {\n        this.$store.commit('toggleLoginState')\n      },\n      mLogin () {\n        if (!this.username) {\n          this.mAlert('请输入用户名和密码！', () => {\n            this.$refs.username.focus()\n          })\n          return\n        }\n        if (!this.password) {\n          this.mAlert('请输入用户名和密码！', () => {\n            this.$refs.password.focus()\n          })\n          return\n        }\n        if (!this.checkcode) {\n          this.mAlert('请输入验证码', () => {\n            this.$refs.checkcode.focus()\n          })\n          return\n        }\n        this.mLoading(true, '登陆中...')\n        this.$http\n          .post('/login.json', {\n            username: this.username,\n            password: this.password,\n            checkcode: this.checkcode\n          })\n          .then(result => {\n            if (result.code === 0) {\n              this.$store.dispatch(types.SAVE_LOGIN_USER, result.data)\n              this.mLoading(false)\n              this.mMessage(\n                '登陆成功！',\n                () => {\n                  this.$store.dispatch(types.COMMON_GONGGAO, this)\n                  this.toggleState()\n                  this.mMemberAmount()\n                },\n                'success',\n                0.5\n              )\n            } else {\n              this.mAlert(\n                result.message,\n                () => {\n                  this.isLogining = false\n                  this.mVCode()\n                },\n                'error',\n                null,\n                null,\n                1\n              )\n            }\n          })\n      },\n      mPhoneLogin(){\n        if (this.phone.trim() == \"\") {\n          this.mAlert('请输入手机号码！'); //请输入手机号码\n          return;\n        }\n        if (this.verifyCode.trim() == \"\") {\n          this.mAlert('请输入手机验证码！') ; //\n          return;\n        }\n        this.mLoading(true);\n        this.$http.post(\"/memberUser/quickLogin.json\", {phoneNo:this.phone,areaCode:this.areaCode,verifyCode:this.verifyCode}).then(result => {\n          this.mLoading(false);\n          if (result.code == 0) {\n            this.$store.dispatch(types.SAVE_LOGIN_USER, result.data);\n            this.mLoading(false);\n            this.mMessage(\n              \"登陆成功！\",\n              () => {\n                if(result.data.isNewMember==1){\n                  this.mConfirm('您的初始密码是123456, 是否前去修改?', () => {\n                    this.$router.push({name: 'LoginPassword'})\n                  })\n                }\n                this.$store.dispatch(types.COMMON_GONGGAO, this);\n                this.$router.push({ name: \"Home\" });\n              },\n              \"success\",\n              0.5\n            );\n          } else {\n            this.mVCode();\n            this.verifyCode='';\n            // this.$Message.error(result.message);\n          }\n        });\n      },\n      mLoginOut () {\n        this.mConfirm('确定要退出吗？', () => {\n          this.mLoading(true, '请稍等...')\n          this.$http.post('/logout.json').then(result => {\n            if (result.code === 0) {\n              sessionStorage.removeItem(types.SESSION_TOKEN)\n              this.$store.commit(types.SESSION_TOKEN)\n              this.$store.dispatch(types.LOGINOUT_USER)\n              this.mLoading(false)\n              this.mReLogin()\n            }\n          })\n        })\n      },\n      mEnter601Game () {\n        if (this.cNeedLogin) {\n          this.mAlert('请先登陆！')\n          return\n        }\n        this.mLoading(true)\n        this.$http\n          .post('/managerGame/getMemberGameUrl.json', {\n            username: this.cLoginUser.username,\n            gameCompanyId: 601,\n            gameId: 0\n          })\n          .then(result => {\n            this.mLoading(false)\n            if (result.code == 0) {\n              setTimeout(() => {\n                var winHandler = window.open('', '_blank')\n                winHandler.location.href = result.data.dgUrl.pcUrl\n              }, 300)\n            } else {\n              this.mAlert(result.message)\n            }\n          })\n          .catch(error => {\n            this.mAlert('游戏正忙，请稍后再试...')\n          })\n      },\n      mHeart () {\n        if (!this.cNeedLogin) {\n          if (this.heartTimer) {\n            clearTimeout(this.heartTimer)\n          }\n          this.$http.post('/checkOnline.json').then(res => {\n            if (res.code == 0) {\n              this.heartTimer = setTimeout(() => {\n                this.mHeart()\n              }, 3 * 1000)\n            }\n          })\n        } else {\n          if (this.heartTimer) {\n            clearTimeout(this.heartTimer)\n          }\n        }\n      },\n      getCode() {\n        if (this.getCodes) {\n          if (this.phone.trim() == \"\") {\n            this.mAlert('请输入手机号码!'); //请输入手机号码\n            return;\n          }\n          let time = 60;\n          this.getCodes = false;\n          timer = setInterval(() => {\n            if (time >= 1) {\n              time--;\n              $('.bg-code').text(time + ' 秒')\n            } else {\n              this.getCodes = true;\n              clearInterval(timer);\n              $('.bg-code').text('获取验证码');\n              console.log(1)\n            }\n          }, 1000)\n\n          this.$http.post(\"/memberUser/sendVerifyCode.json\", {\n            mobile: this.phone,\n            areaCode: this.areaCode\n          }).then(result => {\n            if (result.code == 0) {\n              this.$Message.success('验证码已发送!');\n            } else {\n              this.$Message.error(result.message);\n            }\n          })\n        }\n      }\n    },\n    created () {\n      this.mVCode()\n      this.mCheckLoginState()\n      this.$http.post('/phoneAreaCode.json').then(result => {\n        if (result.code == 0) {\n          this.phoneAreaCode = result.data.codes\n        } else {\n          this.$Message.error(result.message)\n        }\n      })\n      window.onscroll = function () {\n        let scrollheight = document.body.scrollTop == 0 ? document.documentElement.scrollTop\n          : document.body.scrollTop\n        if (scrollheight >= 45) {\n          document.querySelector('.navigation').classList.add('fixed')\n        } else {\n          document.querySelector('.navigation').classList.remove('fixed')\n        }\n\n      }\n    }\n  }\n</script>\n<style>\n    .navigation li a {\n        font-size: 16px;\n        line-height: 60px;\n        height: 60px;\n        color: #fff;\n        display: block;\n        position: relative;\n        text-align: center;\n    }\n\n    .top .login-right{\n        display: none;\n    }\n    input {\n        display: inline-block;\n        width: 100%;\n        height: 32px;\n        line-height: 1.5;\n        padding: 4px 7px;\n        font-size: 12px;\n        border: 1px solid #dcdee2;\n        border-radius: 4px;\n        color: #515a6e;\n        background-color: #fff;\n        background-image: none;\n        position: relative;\n        cursor: text;\n        transition: border 0.2s ease-in-out, background 0.2s ease-in-out,\n        box-shadow 0.2s ease-in-out;\n    }\n\n    .login-panel {\n        display: flex;\n        justify-content: flex-start;\n        margin-top: 10px;\n    }\n\n    .login-input {\n        width: 180px;\n        height: 36px;\n        line-height: 36px;\n        font-size: 14px;\n        padding-left: 10px;\n        color: #000000;\n        border-radius: 0;\n        background-color: #ffffff;\n        outline: none;\n    }\n\n    .vertifyCode {\n        height: 35px;\n        margin-left: 10px;\n        width: 70px;\n    }\n\n    #login_after {\n        display: flex;\n        justify-content: flex-end;\n    }\n\n    .login-title {\n        font-size: 17px;\n        -webkit-font-smoothing: subpixel-antialiased;\n        padding-bottom: 14px;\n        width: 80%;\n        text-align: center;\n        border-bottom: solid 1px #fff;\n        margin-bottom: 10px;\n    }\n\n    .right-nav {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        height: 45px;\n        color: #ffffff;\n        font-size: 14px;\n        font-weight: 600;\n    }\n\n    .need-login {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n    }\n\n    .need-login span {\n        margin-right: 20px;\n        cursor: pointer;\n    }\n\n    .need-login span:hover {\n        text-decoration: underline;\n    }\n\n\n    .top-logo {\n        display: none;\n    }\n\n    .fixed .top-logo {\n        display: block\n    }\n\n    .fixed li.first {\n        padding-left: 15px;\n    }\n\n    .area  .el-input__inner {\n        height: 36px;\n        border-left: 0;\n        border-radius: 0;\n        margin-left: 1px;\n        width: 180px;\n        outline: none;\n    }\n\n    .el-select .el-input.is-focus .el-input__inner{\n        border-color: #dcdee2 !important;\n    }\n\n    .bg-code{\n        position: absolute;\n        right:3px;\n        top: 5px;\n        width: auto;\n        height: 25px;\n        line-height: 25px;\n        min-width: 70px;\n        background-color: #aaaaaa;\n        border-radius: 4px;\n        color: #f3f3f3;\n        padding: 0px;\n        display: flex;\n        font-size: 12px;\n        white-space: nowrap;\n        align-items: center;\n        text-align: center;\n        justify-content: center;\n    }\n</style>\n\n"]}]}